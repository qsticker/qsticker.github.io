(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e4b6426"],{"021b":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));r("99af"),r("b0c0");var n=r("5530"),a=(r("96cf"),r("1da1")),s=r("d4ec"),i=r("bee2"),u=r("6ad1"),o=r("f52b"),c=function(){function e(){Object(s["a"])(this,e)}return Object(i["a"])(e,null,[{key:"create",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={name:r,parentId:t},e.next=3,u["a"].post("workspace/member-groups",JSON.stringify(n));case 3:return a=e.sent,e.abrupt("return",a.data.memberGroup);case 5:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getMemberGroup",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,s,i,c,m,p,l,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].get("workspace/member-groups/".concat(t));case 2:for(r=e.sent,n=r.data.memberGroup.members,a=0;a<n.length;a+=1)s=n[a],i=s.uuid,c=s.name,m=s.businessDefinedId,p=s.confirmed,l=s.role,f=s.belongsTo,n[a]=new o["a"](i,c,m,p,l,f);return e.abrupt("return",r.data.memberGroup);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(n["a"])({},r),e.next=3,u["a"].put("workspace/member-groups/".concat(t),a);case 3:return s=e.sent,e.abrupt("return",s.data.memberGroup);case 5:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"deleteMemberInMemberGroup",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].delete("workspace/member-groups/".concat(t,"/members/").concat(r));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"updateMemberInMemberGroup",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=Object(n["a"])({},a),e.next=3,u["a"].put("workspace/member-groups/".concat(t,"/members/").concat(r),s);case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"updateMemberRoleInMemberGroup",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=Object(n["a"])({},a),e.next=3,u["a"].put("workspace/member-groups/".concat(t,"/set-member-role/").concat(r),s);case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"updateAutoConfirm",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(n["a"])({},r),e.next=3,u["a"].put("workspace/member-groups/updateAutoConfirm/".concat(t),a);case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"updateBelongsTo",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].put("workspace/member-groups/".concat(t,"/set-member-belongsTo/").concat(r,"/").concat(n));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"deleteBelongsTo",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].put("workspace/member-groups/".concat(t,"/set-member-belongsTo/").concat(r));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getSentCount",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].get("workspace/member-groups/send-count/".concat(t,"?start-time=").concat(r,"&end-time=").concat(n));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()}]),e}()},"406b":function(e,t,r){},"498a":function(e,t,r){"use strict";var n=r("23e7"),a=r("58a8").trim,s=r("c8d2");n({target:"String",proto:!0,forced:s("trim")},{trim:function(){return a(this)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("1d80"),a=r("5899"),s="["+a+"]",i=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),o=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(i,"")),2&e&&(r=r.replace(u,"")),r}};e.exports={start:o(1),end:o(2),trim:o(3)}},"6b04":function(e,t,r){},"74c9":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{on:{click:function(t){return t.preventDefault(),e.$router.go(-1)}}},[r("i",{staticClass:"fas fa-arrow-left mr-1"}),e._v(" "+e._s(e.$t("上一頁"))+" ")])},a=[],s=(r("79b4"),r("2877")),i={},u=Object(s["a"])(i,n,a,!1,null,"40b0db68",null);t["a"]=u.exports},"79b4":function(e,t,r){"use strict";var n=r("406b"),a=r.n(n);a.a},c8d2:function(e,t,r){var n=r("d039"),a=r("5899"),s="​᠎";e.exports=function(e){return n((function(){return!!a[e]()||s[e]()!=s||a[e].name!==e}))}},f246:function(e,t,r){"use strict";var n=r("6b04"),a=r.n(n);a.a},f52b:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return i})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return o}));r("b0c0");var n=r("d4ec"),a=function e(t,r,a,s,i,u){Object(n["a"])(this,e),this.openEdit=!1,this.uuid=t,this.name=r,this.businessDefinedId=a,this.confirmed=s,this.role=i,this.belongsTo=u||t},s=function e(t){Object(n["a"])(this,e),this.confirmed=t},i=function e(t){Object(n["a"])(this,e),this.role=t},u=function e(t){Object(n["a"])(this,e),this.name=t},o=function e(t){Object(n["a"])(this,e),this.autoConfirm=t}},fbb6:function(e,t,r){"use strict";r.r(t);var n,a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"member-group-preview"},[e.memberGroup?r("div",{staticClass:"container"},[r("div",{staticClass:"info-preview"},[r("div",{staticClass:"title"},[r("h2",[e._v(" "+e._s(e.$t("班級總覽"))+" ")])]),e.editPermission?r("div",{staticClass:"btn-area"},[r("button",{staticClass:"btn btn-primary",on:{click:function(t){return t.preventDefault(),e.toMemberGroupMaker(t)}}},[e._v(" "+e._s(e.$t("編輯"))+" ")])]):e._e(),e._m(0),r("div",{staticClass:"top-info"},[r("div",{staticClass:"preview-area"},[r("div",{staticClass:"subtitle"},[r("h4",[e._v(" "+e._s(e.$t("班級資訊")))])]),r("div",{staticClass:"preview-items"},[r("div",{staticClass:"item"},[r("label",[e._v(e._s(e.$t("班級名稱"))+"：")]),r("div",{staticClass:"unique-name"},[r("div",{staticClass:"content"},[e._v(" "+e._s(e.memberGroup.uniqueName)+" ")]),r("div",{staticClass:"copy-icon",on:{click:function(t){return e.copy()}}},[!1===e.copyMessageDisplay?r("span",{staticClass:"copy"},[r("i",{staticClass:"fas fa-copy"})]):e._e(),!0===e.copyMessageDisplay?r("span",{staticClass:"copy"},[r("i",{staticClass:"fas fa-check-circle text-success"})]):e._e()])])]),r("div",{staticClass:"item"},[r("label",[e._v(e._s(e.$t("班級擁有者"))+"：")]),r("div",{staticClass:"content"},[e._v(" "+e._s(e.memberGroup.metadata.owner.username)+" ")])]),r("div",{staticClass:"item"},[r("label",[e._v(e._s(e.$t("自動審核"))+"：")]),e.memberGroup.autoConfirm?r("div",{staticClass:"green content"},[e._v(" "+e._s(e.$t("開啟"))+" ")]):e._e(),e.memberGroup.autoConfirm?e._e():r("div",{staticClass:"content"},[e._v(" "+e._s(e.$t("關閉"))+" ")])])])]),r("div",{staticClass:"member-preview"},[r("div",{staticClass:"subtitle"},[r("h4",[e._v(" "+e._s(e.$t("人數統計")))])]),e.memberGroup.members.length>0?r("div",{staticClass:"preview-items"},[r("div",{staticClass:"item item-hr"},[r("label",[e._v(e._s(e.$t("班級人數"))+"：")]),r("div",{staticClass:"num"},[e._v(" "+e._s(e.memberGroup.members.length)+" ")])]),r("div",{staticClass:"item"},[r("label",[e._v(e._s(e.$t("已審核人數"))+"：")]),r("div",{staticClass:"num"},[e._v(" "+e._s(e.confirmedMembers)+" ")])]),r("div",{staticClass:"item item-hr"},[r("label",[e._v(e._s(e.$t("待審核人數"))+"：")]),r("div",{staticClass:"num"},[e._v(" "+e._s(e.notConfirmedMembers)+" ")])]),r("div",{staticClass:"item"},[r("label",[e._v(e._s(e.$t("老師數"))+"：")]),r("div",{staticClass:"num"},[e._v(" "+e._s(e.numberOfTeacher)+" ")])]),r("div",{staticClass:"item"},[r("label",[e._v(e._s(e.$t("學生數"))+"：")]),r("div",{staticClass:"num"},[e._v(" "+e._s(e.numberOfStudent)+" ")])]),r("div",{staticClass:"item"},[r("label",[e._v(e._s(e.$t("重複學生數"))+"：")]),r("div",{staticClass:"num"},[e._v(" "+e._s(e.numberOfRepeatStudent)+" ")])]),r("div",{staticClass:"item"},[r("label",[e._v(e._s(e.$t("特例學生數"))+"：")]),r("div",{staticClass:"num"},[e._v(" "+e._s(e.numberOfExemptedStudent)+" ")])])]):e._e()])]),r("div",{staticClass:"member-list"},[r("div",{staticClass:"subtitle"},[r("h4",[e._v(" "+e._s(e.$t("成員列表")))])]),r("div",[e.memberGroup.members.length>0?r("table",{staticClass:"table table-sm"},[r("tr",[r("th",{attrs:{width:"50"}},[e._v(" "+e._s(e.$t("序號"))+" ")]),r("th",{attrs:{width:"100"}},[e._v(" "+e._s(e.$t("姓名"))+" ")]),r("th",{attrs:{width:"100"}},[e._v(" "+e._s(e.$t("代號"))+" ")]),r("th",{attrs:{width:"50"}},[e._v(" "+e._s(e.$t("審核狀態"))+" ")]),r("th",{attrs:{width:"50"}},[e._v(" "+e._s(e.$t("成員角色"))+" ")]),r("th",{attrs:{width:"80"}},[e._v(" "+e._s(e.$t("備註"))+" ")])]),e._l(e.orderedMembers,(function(t,n){return r("tr",{key:n,staticClass:"data",attrs:{"table-hover":""}},[r("td",[e._v(e._s(n+1))]),r("td",{staticClass:"member-name"},[e._v(" "+e._s(t.name)+" ")]),r("td",[e._v(e._s(t.businessDefinedId))]),r("td",{attrs:{width:"50"}},[!1===t.confirmed?r("div",{staticClass:"confirm-td to-be-confirmed-td"},[e._v(" "+e._s(e.$t("待審核"))+" ")]):e._e(),!0===t.confirmed?r("div",{staticClass:"confirm-td confirmed-td"},[e._v(" "+e._s(e.$t("已審核"))+" ")]):e._e()]),t.role===e.MemberRole.STUDENT?r("td",[e._v(" "+e._s(e.$t("一般學生"))+" ")]):e._e(),t.role===e.MemberRole.TEACHER?r("td",[e._v(" "+e._s(e.$t("老師"))+" ")]):e._e(),t.role===e.MemberRole.STUDENT_DUPLICATED?r("td",[e._v(" "+e._s(e.$t("重複學生"))+" ")]):e._e(),t.role===e.MemberRole.STUDENT_EXEMPTED?r("td",[e._v(" "+e._s(e.$t("特例學生"))+" ")]):e._e(),t.belongsTo!==t.uuid?r("td",[e._v(" "+e._s(e.belongsToMemberName(t.belongsTo))+" ")]):e._e(),t.belongsTo===t.uuid?r("td",[e.checkMemberBeDuplicated(t)?r("span",[e._v(" "+e._s(e.$t("已設為重複對象"))+" ")]):e._e()]):e._e()])}))],2):e._e()])]),r("div",{staticClass:"btn-area last-page"},[r("BackButton")],1)])]):e._e()])},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"download"},[r("i",{staticClass:"fas fa-download d-none"})])}],i=(r("99af"),r("4de4"),r("4160"),r("b0c0"),r("d3b7"),r("25f0"),r("498a"),r("159b"),r("96cf"),r("1da1")),u=r("2b0e"),o=r("aa73"),c=r("021b"),m=r("74c9");(function(e){e["STUDENT"]="STUDENT",e["TEACHER"]="TEACHER",e["STUDENT_DUPLICATED"]="STUDENT_DUPLICATED",e["STUDENT_EXEMPTED"]="STUDENT_EXEMPTED"})(n||(n={}));var p=u["default"].extend({components:{BackButton:m["a"]},data:function(){return{MemberRole:n,memberGroup:null,memberGroupFormUrl:"https://liff.line.me/1656074648-82kPY529#/MemberGroupForm",copyMessageDisplay:!1,copyMessageTimeoutId:0}},computed:{isLoading:function(){return this.$store.state.isLoading},workspaceId:function(){return this.$store.state.currentWorkspace.uuid},memberGroupId:function(){return this.$store.state.currentMemberGroup.uuid},currentMemberGroup:function(){return this.$store.state.currentMemberGroup},confirmedMembers:function(){var e=0;return this.memberGroup&&this.memberGroup.members.forEach((function(t){t.confirmed&&(e+=1)})),e},notConfirmedMembers:function(){var e=0;return this.memberGroup&&(e=this.memberGroup.members.length-this.confirmedMembers),e},editPermission:function(){return this.$store.state.editPermission},memberGroupQueryUrl:function(){return this.memberGroup?"".concat(this.memberGroupFormUrl,"?name=").concat(this.memberGroup.metadata.name,"&uniqueNum=").concat(this.memberGroup.uniqueName.substr(-3)):""},orderedMembers:function(){if(this.memberGroup){var e=[],t=[];this.memberGroup.members.forEach((function(r){r.confirmed?e.push(r):t.push(r)})),e=this.orderArrayEditor(e),t=this.orderArrayEditor(t);var r=[];return e.forEach((function(e){r.push(e)})),t.forEach((function(e){r.push(e)})),0===r.length?this.memberGroup.members:r}return[]},numberOfTeacher:function(){var e=0;return this.memberGroup&&this.memberGroup.members.forEach((function(t){t.role===n.TEACHER&&(e+=1)})),e},numberOfStudent:function(){var e=0;return this.memberGroup&&this.memberGroup.members.forEach((function(t){t.role===n.STUDENT&&(e+=1)})),e},numberOfRepeatStudent:function(){var e=0;return this.memberGroup&&this.memberGroup.members.forEach((function(t){t.role===n.STUDENT_DUPLICATED&&(e+=1)})),e},numberOfExemptedStudent:function(){var e=0;return this.memberGroup&&this.memberGroup.members.forEach((function(t){t.role===n.STUDENT_EXEMPTED&&(e+=1)})),e}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o["a"].loginCheck(),e.$store.commit("updateLoading",!0),t.prev=2,t.next=5,c["a"].getMemberGroup(e.memberGroupId);case 5:e.memberGroup=t.sent;case 6:return t.prev=6,e.$store.commit("updateLoading",!1),t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[2,,6,9]])})))()},methods:{toMemberGroupMaker:function(){this.$router.push("/manager/membergroup-maker")},copy:function(){var e,t=this,r='您的班級名稱為"'.concat(null===(e=this.memberGroup)||void 0===e?void 0:e.uniqueName,'"，請於互動貼圖頻道填入您的班級名稱，或是點擊以下連結將自動加入班級。\n').concat(this.memberGroupQueryUrl);this.$copyText(r).then((function(){t.copyMessageDisplay=!0,t.copyMessageTimeoutId=setTimeout(t.clearCopyMessage,3700),t.$notify({type:"success",title:t.$t("已複製班級資訊").toString()})}),(function(e){console.error("複製失败",e.text)}))},clearCopyMessage:function(){this.copyMessageDisplay=!1},clearCopyMessageTimeout:function(){this.clearCopyMessage(),clearTimeout(this.copyMessageTimeoutId)},checkMemberBeDuplicated:function(e){var t=!1;return this.memberGroup&&this.memberGroup.members.forEach((function(r){t||r!==e&&r.belongsTo===e.uuid&&(t=!0)})),t},belongsToMemberName:function(e){var t="";return this.memberGroup&&this.memberGroup.members.forEach((function(r){r.uuid===e&&(t=r.name)})),t},orderArrayEditor:function(e){var t=[],r=e.filter((function(e){return e.role===n.TEACHER})),a=e.filter((function(e){return e.role===n.STUDENT})),s=e.filter((function(e){return e.role===n.STUDENT_DUPLICATED})),i=e.filter((function(e){return e.role===n.STUDENT_EXEMPTED})),u=new Intl.Collator("en",{numeric:!0,sensitivity:"base"}),o=r.sort((function(e,t){return u.compare(e.name.toUpperCase().trim(),t.name.toUpperCase().trim())})),c=a.sort((function(e,t){return u.compare(e.name.toUpperCase().trim(),t.name.toUpperCase().trim())})),m=s.sort((function(e,t){return u.compare(e.name.toUpperCase().trim(),t.name.toUpperCase().trim())})),p=i.sort((function(e,t){return u.compare(e.name.toUpperCase().trim(),t.name.toUpperCase().trim())}));return o.forEach((function(e){t.push(e)})),p.forEach((function(e){t.push(e)})),c.forEach((function(e){t.push(e)})),m.forEach((function(e){t.push(e)})),t}}}),l=p,f=(r("f246"),r("2877")),b=Object(f["a"])(l,a,s,!1,null,"136d70c5",null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-3e4b6426.fa008303.js.map