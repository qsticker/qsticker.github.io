(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-205d914a"],{"667f":function(t,e,n){"use strict";var r=n("e3ad"),a=n.n(r);a.a},a55b:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("div",{staticClass:"container",staticStyle:{"max-width":"440px"}},[n("h3",[t._v(" "+t._s(t.$t("登入"))+" ")]),n("div",{staticClass:"space-holder"},[""!==t.loginMessage?n("p",{staticClass:"login-message"},[t._v(" "+t._s(t.loginMessage)+" ")]):t._e()]),n("form",{staticClass:"mt-4"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"account"}},[t._v(t._s(t.$t("帳號")))]),!1===t.hasAccount?n("div",{staticClass:"empty-input mb-1"},[t._v(" "+t._s(t.$t("請填寫這個欄位"))+" ")]):t._e(),n("div",{staticClass:"input-block"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"form-control",attrs:{id:"account",type:"text",name:"account",placeholder:t.$t("您的帳號")},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}})])]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"control-label",attrs:{for:"password"}},[t._v(t._s(t.$t("密碼")))]),!1===t.hasPassword?n("div",{staticClass:"empty-input mb-1"},[t._v(" "+t._s(t.$t("請填寫這個欄位"))+" ")]):t._e(),n("div",{staticClass:"input-block"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",type:"password",name:"password",placeholder:t.$t("您的密碼")},domProps:{value:t.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loginButton(e)},input:function(e){e.target.composing||(t.password=e.target.value)}}})])])]),n("div",{staticClass:"login-btn"},[n("button",{staticClass:"btn btn-success btn-large",on:{click:t.loginButton}},[t._v(" "+t._s(t.$t("登入"))+" ")])]),n("div",{staticClass:"mt-5"},[t._v(" "+t._s(t.$t("第一次使用"))),n("strong",[t._v(t._s(t.$t("互動貼圖")))]),t._v("？ "),n("router-link",{attrs:{to:"/register"}},[t._v(" "+t._s(t.$t("註冊"))+" ")])],1)])])},a=[],s=(n("d3b7"),n("25f0"),n("96cf"),n("1da1")),o=n("2b0e"),c=n("dade"),i=n("aa73"),u=n("b8fd"),l=o["default"].extend({data:function(){return{account:"",hasAccount:!0,password:"",hasPassword:!0,loginMessage:""}},mounted:function(){i["a"].loginCheck()&&this.$router.push({name:"Workspace"})},methods:{reset:function(){this.account="",this.password=""},loginButton:function(){""!==this.account&&""!==this.password?(this.hasPassword=!0,this.hasAccount=!0,this.handleLogin()):(""===this.account?this.hasAccount=!1:this.hasAccount=!0,""===this.password?this.hasPassword=!1:this.hasPassword=!0)},handleLogin:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].login(t.account,t.password);case 3:return n=e.sent,r=n.profile,a=n.auth,t.$cookies.set("token",a.token),t.$store.commit("saveProfile",r),e.next=10,t.fetchFeatureFlags();case 10:t.$router.push({name:"Workspace"}),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),e.t0&&e.t0.response&&401===e.t0.response.status?(t.loginMessage=t.$t("登入失敗，錯誤的帳號或密碼").toString(),t.reset(),setTimeout((function(){t.loginMessage=""}),3e3)):console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},fetchFeatureFlags:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t.$store.state.profile){e.next=6;break}return e.next=4,u["a"].fetchAllFeatureFlags(t.$store.state.profile.username);case 4:n=e.sent,t.$store.commit("updateFeatureFlags",n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}}),p=l,d=(n("667f"),n("2877")),f=Object(d["a"])(p,r,a,!1,null,"0560477a",null);e["default"]=f.exports},dade:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n("96cf");var r=n("1da1"),a=n("d4ec"),s=n("bee2"),o=n("6ad1"),c=function(){function t(){Object(a["a"])(this,t)}return Object(s["a"])(t,null,[{key:"register",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n,r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={username:e,email:n,password:r},t.next=3,o["a"].post("account/register",a);case 3:return s=t.sent,t.abrupt("return",s.data.registerId);case 5:case"end":return t.stop()}}),t)})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"verify",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={authCode:e},t.next=3,o["a"].post("account/verify",n);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getRegisterInfo",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].get("account/register/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data.registerInfo);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"resend",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={},t.next=3,o["a"].post("account/register/".concat(e),n);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"login",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={identifier:e,password:n},t.next=3,o["a"].post("account/login",r);case 3:return a=t.sent,t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()}]),t}()},e3ad:function(t,e,n){}}]);
//# sourceMappingURL=chunk-205d914a.7fc8846b.js.map