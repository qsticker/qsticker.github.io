{"version":3,"sources":["webpack:///./src/apis/MemberGroupApi.ts","webpack:///./src/components/member_group_maker/UpdateWorkspaceObjectNameModal.vue?9f8d","webpack:///./node_modules/core-js/internals/same-value.js","webpack:///./src/views/MemberGroupMaker.vue?d05e","webpack:///./src/components/member_group_maker/SelectMemberModal.vue","webpack:///./src/components/member_group_maker/SelectMemberModal.vue?3cd6","webpack:///./src/views/MemberGroupMaker.vue","webpack:///./src/components/member_group_maker/SelectMemberModal.vue?ac53","webpack:///./src/components/member_group_maker/SelectMemberModal.vue?310c","webpack:///./src/views/MemberGroupMaker.vue?971b","webpack:///./src/views/MemberGroupMaker.vue?ec9f","webpack:///./src/views/MemberGroupMaker.vue?287c","webpack:///./node_modules/core-js/modules/es.string.search.js","webpack:///./src/components/member_group_maker/UpdateWorkspaceObjectNameModal.vue?01ce","webpack:///./src/components/member_group_maker/UpdateWorkspaceObjectNameModal.vue","webpack:///./src/components/member_group_maker/UpdateWorkspaceObjectNameModal.vue?4aee","webpack:///./src/components/member_group_maker/UpdateWorkspaceObjectNameModal.vue?6fed","webpack:///./src/components/member_group_maker/UpdateWorkspaceObjectNameModal.vue?b03d","webpack:///./src/apis/models/MemberGroupModel.ts","webpack:///./src/views/MemberGroupMaker.vue?271b"],"names":["MemberGroupApi","parentFolderId","name","body","parentId","post","JSON","stringify","result","data","memberGroup","memberGroupId","get","members","i","length","uuid","businessDefinedId","confirmed","role","belongsTo","updatePayload","put","memberId","delete","startTime","endTime","module","exports","Object","is","x","y","MemberRole","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","$t","uniqueName","on","$event","preventDefault","handleUpdateName","directives","rawName","value","memberList","expression","domProps","target","composing","$set","controlAutoConfirm","model","callback","$$v","autoConfirm","_l","member","key","openRemoveModal","toggleConfirmed","_e","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","val","_value","multiple","checkMemberRole","TEACHER","STUDENT","STUDENT_DUPLICATED","STUDENT_EXEMPTED","belongsToMemberName","openDuplicateSelectedModal","checkMemberBeDuplicated","updatedBelongsTo","staticRenderFns","beforeOpen","memberLocalRootId","memberShareRootId","defaultSelection","rootName","isMemberUnitOn","duplicatedStudent","handleSubmit","handleCancel","extend","components","WorkspaceObjectSelector","computed","$store","state","currentWorkspace","memberFolders","local","share","currentMemberGroup","methods","event","params","studentArr","object","selection","beDuplicatedStudent","$emit","$modal","hide","component","UpdateWorkspaceObjectNameModal","SelectMemberModal","workspaceId","orderedMemberList","confirmedArr","unConfirmedArr","forEach","push","orderArrayEditor","arr","element","mounted","loginCheck","loadMemberGroup","getMemberGroup","commit","updatePaylaod","updateAutoConfirm","$notify","type","title","toString","text","show","workspaceObject","then","editStudent","index","item","openEdit","saveEdit","updateMemberInMemberGroup","isDuplicated","window","alert","deleteBelongsTo","setMemberRole","updateMemberRoleInMemberGroup","setTimeout","updateBelongsTo","buttons","handler","deleteStudent","console","log","deleteMemberInMemberGroup","splice","array","tempArr","teacherArr","duplicatedStudentArr","exemptedStudentArr","collator","Intl","Collator","numeric","sensitivity","newTeacherArr","sort","a","b","compare","toUpperCase","trim","newStudentArr","newDuplicatedStudentArr","newExemptedStudentArr","fixRegExpWellKnownSymbolLogic","anObject","requireObjectCoercible","sameValue","regExpExec","SEARCH","nativeSearch","maybeCallNative","regexp","O","searcher","undefined","RegExp","String","res","done","rx","S","previousLastIndex","lastIndex","modalName","modalWidth","objectType","workspaceObjectName","remind","MODAL_WIDTH","translate","metadata","created","innerWidth","MemberGroup","Folder","regex","search","Error","update","updatedMemberGroupObject","FolderApi","Member","UpdateMemberPayload","UpdateMemberRolePayload","UpdateMemberGroupPayload","UpdateAutoConfirmPayload"],"mappings":"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","file":"js/chunk-5a6f62b6.f83c2ef7.js","sourcesContent":["import api from '@/apis/BaseApi';\r\nimport {\r\n  Member, MemberGroupModel, MemberGroupPreviewModel, UpdateMemberGroupPayload,\r\n  UpdateMemberRolePayload, UpdateAutoConfirmPayload, UpdateMemberPayload, MemberGroupSentCountModel,\r\n} from './models/MemberGroupModel';\r\n\r\nexport default class MemberGroupApi {\r\n  /**\r\n   * Create a MemberGroup with given name for a Workspace\r\n   *\r\n   * @param workspaceId the id of the workspace to create memeber group\r\n   * @param name the name for the member group, should pass regex: ^[^\\s_!¡?÷?¿\\/\\\\+=@#$%ˆ&*(){}|~<>;:\\[\\]]{2,}$\r\n   */\r\n  static async create(parentFolderId: string, name: string): Promise<MemberGroupPreviewModel> {\r\n    const body = {\r\n      name,\r\n      parentId: parentFolderId,\r\n    };\r\n\r\n    const result = await api.post('workspace/member-groups', JSON.stringify(body));\r\n    return result.data.memberGroup;\r\n  }\r\n\r\n  /**\r\n   * Get the detailed information of a member group\r\n   *\r\n   * @param workspaceId\r\n   * @param memberGroupId\r\n   */\r\n  static async getMemberGroup(memberGroupId: string): Promise<MemberGroupModel> {\r\n    const result = await api.get(`workspace/member-groups/${memberGroupId}`);\r\n\r\n    // map member object\r\n    const { members } = result.data.memberGroup;\r\n    for (let i = 0; i < members.length; i += 1) {\r\n      const {\r\n        uuid, name, businessDefinedId, confirmed, role, belongsTo,\r\n      } = members[i];\r\n      members[i] = new Member(uuid, name, businessDefinedId, confirmed, role, belongsTo);\r\n    }\r\n\r\n    return result.data.memberGroup;\r\n  }\r\n\r\n  /**\r\n   * Update a member group\r\n   *\r\n   * Usage:\r\n   * use UpdateMemberPayload.constructor to build payload,\r\n   * if there are some field you do not intend to udpate,\r\n   * just pass `null` as value for fields in the constructor,\r\n   * e.g. new UpdateMemberGroupPayload(null).\r\n   *\r\n   *\r\n   * @param workspaceId\r\n   * @param memberGroupId\r\n   * @param updatePayload\r\n   */\r\n  static async update(\r\n    memberGroupId: string,\r\n    updatePayload: UpdateMemberGroupPayload,\r\n  ): Promise<MemberGroupPreviewModel> {\r\n    const body = {\r\n      ...updatePayload,\r\n    };\r\n\r\n    const result = await api.put(`workspace/member-groups/${memberGroupId}`, body);\r\n    return result.data.memberGroup;\r\n  }\r\n\r\n  /**\r\n   * Delete a member in a member group in a workspace\r\n   *\r\n   * @param workspaceId\r\n   * @param memberGroupId\r\n   * @param memberId\r\n   */\r\n  static async deleteMemberInMemberGroup(memberGroupId: string, memberId: string): Promise<void> {\r\n    const result = await api.delete(`workspace/member-groups/${memberGroupId}/members/${memberId}`);\r\n    return result.data;\r\n  }\r\n\r\n  /**\r\n   * Update a member state in a member group in a workspace\r\n   *\r\n   * Usage:\r\n   * use UpdateMemberPayload.constructor to build payload,\r\n   * if there are some field you do not intend to udpate,\r\n   * just pass `null` as value for fields in the constructor,\r\n   * e.g. new UpdateMemberPayload(null).\r\n   *\r\n   *\r\n   * @param workspaceId\r\n   * @param memberGroupId\r\n   * @param memberId\r\n   */\r\n  static async updateMemberInMemberGroup(\r\n    memberGroupId: string,\r\n    memberId: string,\r\n    updatePayload: UpdateMemberPayload,\r\n  ): Promise<void> {\r\n    const body = {\r\n      ...updatePayload,\r\n    };\r\n    const result = await api.put(`workspace/member-groups/${memberGroupId}/members/${memberId}`, body);\r\n    return result.data;\r\n  }\r\n\r\n  static async updateMemberRoleInMemberGroup(\r\n    memberGroupId: string,\r\n    memberId: string,\r\n    updatePayload: UpdateMemberRolePayload,\r\n  ): Promise<void> {\r\n    const body = {\r\n      ...updatePayload,\r\n    };\r\n    const result = await api.put(`workspace/member-groups/${memberGroupId}/set-member-role/${memberId}`, body);\r\n    return result.data;\r\n  }\r\n\r\n  static async updateAutoConfirm(\r\n    memberGroupId: string,\r\n    updatePayload: UpdateAutoConfirmPayload,\r\n  ): Promise<void> {\r\n    const body = {\r\n      ...updatePayload,\r\n    };\r\n    const result = await api.put(`workspace/member-groups/updateAutoConfirm/${memberGroupId}`, body);\r\n    return result.data;\r\n  }\r\n\r\n  static async updateBelongsTo(\r\n    memberGroupId: string,\r\n    memberId: string,\r\n    belongsTo: string,\r\n  ): Promise<void> {\r\n    const result = await api.put(`workspace/member-groups/${memberGroupId}/set-member-belongsTo/${memberId}/${belongsTo}`);\r\n    return result.data;\r\n  }\r\n\r\n  static async deleteBelongsTo(\r\n    memberGroupId: string,\r\n    memberId: string,\r\n  ): Promise<void> {\r\n    const result = await api.put(`workspace/member-groups/${memberGroupId}/set-member-belongsTo/${memberId}`);\r\n    return result.data;\r\n  }\r\n\r\n  static async getSentCount(memberGroupId: string, startTime: string, endTime: string): Promise<MemberGroupSentCountModel> {\r\n    const result = await api.get(`workspace/member-groups/send-count/${memberGroupId}?start-time=${startTime}&end-time=${endTime}`);\r\n\r\n    return result.data;\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateWorkspaceObjectNameModal.vue?vue&type=style&index=1&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateWorkspaceObjectNameModal.vue?vue&type=style&index=1&lang=scss&\"","// `SameValue` abstract operation\n// https://tc39.github.io/ecma262/#sec-samevalue\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"memberGroup-maker\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"info\"},[_c('div',{staticClass:\"memberGroup-name\"},[_c('label',{attrs:{\"for\":\"group-name\"}},[_vm._v(_vm._s(_vm.$t('班級名稱'))+\"：\"+_vm._s(_vm.memberGroup.uniqueName))]),_c('button',{staticClass:\"btn edit-btn\",on:{\"click\":function($event){$event.preventDefault();return _vm.handleUpdateName($event)}}},[_vm._v(\" \"+_vm._s(_vm.$t('修改名稱'))+\" \")])]),_c('div',{staticClass:\"length\"},[_c('label',{attrs:{\"for\":\"group-length\"}},[_vm._v(_vm._s(_vm.$t('總人數'))+\"：\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.memberList.length),expression:\"memberList.length\"}],attrs:{\"id\":\"group-length\",\"type\":\"text\",\"disabled\":\"\"},domProps:{\"value\":(_vm.memberList.length)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.memberList, \"length\", $event.target.value)}}})]),_c('div',{staticClass:\"itemControl\"},[_c('span',[_vm._v(_vm._s(_vm.$t('自動審核'))+\"：\")]),_c('toggle-button',{attrs:{\"color\":\"#82C7EB\",\"labels\":true,\"sync\":true},on:{\"change\":_vm.controlAutoConfirm},model:{value:(_vm.autoConfirm),callback:function ($$v) {_vm.autoConfirm=$$v},expression:\"autoConfirm\"}})],1)]),_c('table',{staticClass:\"table table-sm\"},[_c('tr',[_c('th',{attrs:{\"width\":\"50\"}},[_vm._v(\" \"+_vm._s(_vm.$t('刪除'))+\" \")]),_c('th',{attrs:{\"width\":\"50\"}},[_vm._v(\" \"+_vm._s(_vm.$t('序號'))+\" \")]),_c('th',{attrs:{\"width\":\"100\"}},[_vm._v(\" \"+_vm._s(_vm.$t('姓名'))+\" \")]),_c('th',{attrs:{\"width\":\"90\"}},[_vm._v(\" \"+_vm._s(_vm.$t('代號'))+\" \")]),_c('th',{attrs:{\"width\":\"60\"}},[_vm._v(\" \"+_vm._s(_vm.$t('審核狀態'))+\" \")]),_c('th',{attrs:{\"width\":\"50\"}},[_vm._v(\" \"+_vm._s(_vm.$t('成員角色'))+\" \")]),_c('th',{attrs:{\"width\":\"80\"}},[_vm._v(\" \"+_vm._s(_vm.$t('備註'))+\" \")])]),_vm._l((_vm.orderedMemberList),function(member,key){return _c('tr',{key:key,staticClass:\"data\",attrs:{\"table-hover\":\"\"}},[_c('td',[_c('button',{staticClass:\"btn no-bg-btn\",on:{\"click\":function($event){return _vm.openRemoveModal(key)}}},[_c('i',{staticClass:\"fas fa-trash-alt\"})])]),_c('td',[_vm._v(_vm._s(key+1))]),_c('td',[_vm._v(_vm._s(member.name))]),_c('td',[_vm._v(_vm._s(member.businessDefinedId))]),_c('td',[(member.confirmed === false)?_c('button',{staticClass:\"btn to-be-confirmed-td\",on:{\"click\":function($event){return _vm.toggleConfirmed(member)}}},[_vm._v(\" \"+_vm._s(_vm.$t('待審核'))+\" \")]):_vm._e(),(member.confirmed === true)?_c('button',{staticClass:\"btn confirmed-td\",on:{\"click\":function($event){return _vm.toggleConfirmed(member)}}},[_vm._v(\" \"+_vm._s(_vm.$t('已審核'))+\" \")]):_vm._e()]),_c('td',[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(member.role),expression:\"member.role\"}],attrs:{\"id\":\"roleSetting\",\"name\":\"memberRole\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(member, \"role\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])},function($event){return _vm.checkMemberRole(member)}]}},[_c('option',{domProps:{\"value\":_vm.MemberRole.TEACHER}},[_vm._v(\" \"+_vm._s(_vm.$t('老師'))+\" \")]),_c('option',{domProps:{\"value\":_vm.MemberRole.STUDENT}},[_vm._v(\" \"+_vm._s(_vm.$t('一般學生'))+\" \")]),_c('option',{domProps:{\"value\":_vm.MemberRole.STUDENT_DUPLICATED}},[_vm._v(\" \"+_vm._s(_vm.$t('重複學生'))+\" \")]),_c('option',{domProps:{\"value\":_vm.MemberRole.STUDENT_EXEMPTED}},[_vm._v(\" \"+_vm._s(_vm.$t('特例學生'))+\" \")])])]),(member.belongsTo !== member.uuid)?_c('td',[_vm._v(\" \"+_vm._s(_vm.belongsToMemberName(member.belongsTo))+\" \"),_c('i',{staticClass:\"fas fa-pen\",on:{\"click\":function($event){return _vm.openDuplicateSelectedModal(member)}}})]):_vm._e(),(member.belongsTo === member.uuid)?_c('td',[(_vm.checkMemberBeDuplicated(member))?_c('span',[_vm._v(\" \"+_vm._s(_vm.$t('已設為重複對象'))+\" \")]):_vm._e()]):_vm._e()])})],2),_c('v-dialog')],1),_c('UpdateWorkspaceObjectNameModal'),_c('SelectMemberModal',{on:{\"submit-selection\":_vm.updatedBelongsTo}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue';\r\nimport WorkspaceObjectSelector from '@/components/test_maker/WorkspaceObjectSelector.vue';\r\nimport { MemberModel } from '@/apis/models/MemberGroupModel';\r\n\r\nenum MemberRole{\r\n  STUDENT = 'STUDENT',\r\n  TEACHER = 'TEACHER',\r\n  STUDENT_DUPLICATED = 'STUDENT_DUPLICATED',\r\n  STUDENT_EXEMPTED = 'STUDENT_EXEMPTED'\r\n}\r\n\r\nexport default Vue.extend({\r\n  components: {\r\n    WorkspaceObjectSelector,\r\n  },\r\n  data() {\r\n    return {\r\n      MemberRole,\r\n      defaultSelection: [] as MemberModel[],\r\n      duplicatedStudent: {} as MemberModel,\r\n      isMemberUnitOn: true,\r\n      memberList: [] as MemberModel[],\r\n    };\r\n  },\r\n  computed: {\r\n    memberLocalRootId(): string | null {\r\n      if (this.$store.state.currentWorkspace) {\r\n        return this.$store.state.currentWorkspace.memberFolders.local;\r\n      }\r\n      return null;\r\n    },\r\n    memberShareRootId(): string | null {\r\n      if (this.$store.state.currentWorkspace) {\r\n        return this.$store.state.currentWorkspace.memberFolders.share;\r\n      }\r\n      return null;\r\n    },\r\n    rootName(): string {\r\n      return this.$store.state.currentMemberGroup.uniqueName;\r\n    },\r\n  },\r\n  methods: {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    beforeOpen(event: any) {\r\n      // import stuff that was selected before\r\n      if (event.params.memberList) {\r\n        const studentArr = event.params.memberList.filter((object: MemberModel) => object.role === MemberRole.STUDENT);\r\n        this.memberList = studentArr;\r\n      }\r\n      if (event.params.defaultSelection) {\r\n        this.defaultSelection = event.params.defaultSelection;\r\n      }\r\n      if (event.params.duplicatedStudent) {\r\n        this.duplicatedStudent = event.params.duplicatedStudent;\r\n      }\r\n    },\r\n    handleSubmit(selection: MemberModel[]) {\r\n      const Object = {\r\n        beDuplicatedStudent: selection[0],\r\n        duplicatedStudent: this.duplicatedStudent,\r\n      };\r\n      this.$emit('submit-selection', Object);\r\n      this.$modal.hide('select-member-modal');\r\n    },\r\n    handleCancel() {\r\n      const Object = {\r\n        beDuplicatedStudent: null,\r\n        duplicatedStudent: this.duplicatedStudent,\r\n      };\r\n      this.$emit('submit-selection', Object);\r\n      this.$modal.hide('select-member-modal');\r\n    },\r\n  },\r\n});\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{staticClass:\"modal-container\",attrs:{\"name\":\"select-member-modal\",\"transition\":\"pop-out\",\"width\":\"640\",\"focus-trap\":true,\"height\":\"640\"},on:{\"before-open\":_vm.beforeOpen}},[(_vm.memberLocalRootId && _vm.memberShareRootId)?_c('WorkspaceObjectSelector',{attrs:{\"local-root-id\":_vm.memberLocalRootId,\"share-root-id\":_vm.memberShareRootId,\"default-selection\":_vm.defaultSelection,\"local-root-name\":_vm.$t(_vm.rootName),\"allow-select-many\":false,\"is-member-unit-on\":_vm.isMemberUnitOn,\"duplicated-student\":_vm.duplicatedStudent,\"member-list\":_vm.memberList},on:{\"submit-selection\":_vm.handleSubmit,\"cancel\":_vm.handleCancel}}):_c('loading',{attrs:{\"active\":true,\"is-full-page\":false,\"background-color\":\"transparent\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue';\r\nimport UpdateWorkspaceObjectNameModal from '@/components/member_group_maker/UpdateWorkspaceObjectNameModal.vue';\r\nimport MemberGroupApi from '@/apis/MemberGroupApi';\r\nimport {\r\n  BelongsToMembersModel,\r\n  MemberGroupModel,\r\n  UpdateMemberPayload, UpdateMemberRolePayload,\r\n  MemberModel, UpdateAutoConfirmPayload,\r\n} from '@/apis/models/MemberGroupModel';\r\nimport Auth from '@/libs/auth';\r\nimport SelectMemberModal from '@/components/member_group_maker/SelectMemberModal.vue';\r\n\r\nenum MemberRole{\r\n  STUDENT = 'STUDENT',\r\n  TEACHER = 'TEACHER',\r\n  STUDENT_DUPLICATED = 'STUDENT_DUPLICATED',\r\n  STUDENT_EXEMPTED = 'STUDENT_EXEMPTED'\r\n}\r\n\r\nexport default Vue.extend({\r\n  components: {\r\n    UpdateWorkspaceObjectNameModal,\r\n    SelectMemberModal,\r\n  },\r\n  data() {\r\n    return {\r\n      MemberRole,\r\n      memberList: [] as MemberModel[],\r\n      memberGroup: {} as MemberGroupModel,\r\n      members: [] as MemberModel[],\r\n      autoConfirm: false,\r\n    };\r\n  },\r\n  computed: {\r\n    workspaceId(): string {\r\n      return this.$store.state.currentWorkspace.uuid;\r\n    },\r\n    memberGroupId(): string {\r\n      return this.$store.state.currentMemberGroup.uuid;\r\n    },\r\n    orderedMemberList(): MemberModel[] {\r\n      if (this.memberList) {\r\n        let confirmedArr = [] as MemberModel[];\r\n        let unConfirmedArr = [] as MemberModel[];\r\n        this.memberList.forEach((object) => {\r\n          if (object.confirmed) {\r\n            confirmedArr.push(object);\r\n          } else {\r\n            unConfirmedArr.push(object);\r\n          }\r\n        });\r\n        confirmedArr = this.orderArrayEditor(confirmedArr);\r\n        unConfirmedArr = this.orderArrayEditor(unConfirmedArr);\r\n\r\n        const arr = [] as MemberModel[];\r\n        confirmedArr.forEach((element) => {\r\n          arr.push(element);\r\n        });\r\n        unConfirmedArr.forEach((element) => {\r\n          arr.push(element);\r\n        });\r\n\r\n        if (arr.length === 0) {\r\n          return this.memberList;\r\n        }\r\n        return arr;\r\n      }\r\n      return [];\r\n    },\r\n  },\r\n  async mounted() {\r\n    Auth.loginCheck();\r\n    this.loadMemberGroup(this.memberGroupId);\r\n    try {\r\n      this.memberGroup = await MemberGroupApi.getMemberGroup(this.memberGroupId);\r\n      this.members = this.memberGroup.members;\r\n    } finally {\r\n      this.$store.commit('updateLoading', false);\r\n    }\r\n    this.autoConfirm = this.memberGroup.autoConfirm;\r\n  },\r\n  methods: {\r\n    controlAutoConfirm() {\r\n      this.$store.commit('updateLoading', true);\r\n      this.memberGroup.autoConfirm = this.autoConfirm;\r\n      const updatePaylaod = new UpdateAutoConfirmPayload(this.memberGroup.autoConfirm);\r\n      MemberGroupApi.updateAutoConfirm(this.memberGroupId, updatePaylaod);\r\n      this.$notify({\r\n        type: 'success',\r\n        title: this.$t('成功').toString(),\r\n        text: this.$t('自動審核狀態已更新').toString(),\r\n      });\r\n      this.$store.commit('updateLoading', false);\r\n    },\r\n    handleUpdateName() {\r\n      this.$modal.show('update-workspace-object-name-modal', {\r\n        workspaceObject: this.$store.state.currentMemberGroup,\r\n      });\r\n    },\r\n    loadMemberGroup(memberGroupId: string) {\r\n      MemberGroupApi.getMemberGroup(memberGroupId).then((memberGroup) => {\r\n        this.memberList = memberGroup.members;\r\n      });\r\n    },\r\n    editStudent(index: number) {\r\n      const item = this.members[index];\r\n      item.openEdit = true;\r\n    },\r\n    saveEdit(index: number) {\r\n      const item = this.members[index];\r\n      item.openEdit = false;\r\n    },\r\n    toggleConfirmed(item: MemberModel) {\r\n      const updatePaylaod = new UpdateMemberPayload(!item.confirmed);\r\n      MemberGroupApi.updateMemberInMemberGroup(this.memberGroupId, item.uuid, updatePaylaod).then(() => {\r\n        item.confirmed = !item.confirmed;\r\n      });\r\n    },\r\n    checkMemberBeDuplicated(item: MemberModel) { // 確認這個人是否有被設為重複對象\r\n      let isDuplicated = false;\r\n      this.memberList.forEach((member) => {\r\n        if (!isDuplicated) {\r\n          if (member !== item && member.belongsTo === item.uuid) {\r\n            isDuplicated = true;\r\n          }\r\n        }\r\n      });\r\n      return isDuplicated;\r\n    },\r\n    async checkMemberRole(item: MemberModel) {\r\n      if (this.checkMemberBeDuplicated(item)) { // 確認這個人是否有被設為重複對象\r\n        item.role = MemberRole.STUDENT; // 有的話會被設回學生身份不可異動\r\n        // eslint-disable-next-line no-alert\r\n        window.alert('此學生已被設定為其他學生的重複對象，不可以再異動為其他角色');\r\n      }\r\n      if (item.role === MemberRole.STUDENT_DUPLICATED) {\r\n        this.openDuplicateSelectedModal(item);\r\n        item.role = MemberRole.STUDENT; // 先改回D4 避免modal被點擊旁邊關閉時已先儲存STUDENT_DUPLICATED\r\n      } else if (item.role !== MemberRole.STUDENT_DUPLICATED) {\r\n        await MemberGroupApi.deleteBelongsTo(this.memberGroupId, item.uuid);\r\n        item.belongsTo = item.uuid;\r\n        this.setMemberRole(item);\r\n      }\r\n    },\r\n    async setMemberRole(item: MemberModel) {\r\n      const updatePaylaod = new UpdateMemberRolePayload(item.role);\r\n      await MemberGroupApi.updateMemberRoleInMemberGroup(this.memberGroupId, item.uuid, updatePaylaod);\r\n      this.$notify({\r\n        type: 'success',\r\n        title: this.$t('身份更新').toString(),\r\n        text: `${item.name} ${this.$t('更新成功').toString()}`,\r\n      });\r\n    },\r\n    belongsToMemberName(uuid: string) {\r\n      let result = '';\r\n      this.memberList.forEach((member) => {\r\n        if (member.uuid === uuid) {\r\n          result = member.name;\r\n        }\r\n      });\r\n      return result;\r\n    },\r\n    updatedBelongsTo(object: BelongsToMembersModel) {\r\n      if (object.beDuplicatedStudent !== null) {\r\n        object.duplicatedStudent.role = MemberRole.STUDENT_DUPLICATED;\r\n        this.setMemberRole(object.duplicatedStudent);\r\n        setTimeout(() => { // 先用這個方式\r\n          MemberGroupApi.updateBelongsTo(this.memberGroupId, object.duplicatedStudent.uuid, object.beDuplicatedStudent.uuid);\r\n          object.duplicatedStudent.belongsTo = object.beDuplicatedStudent.uuid;\r\n        },\r\n        500);\r\n      }\r\n    },\r\n    openDuplicateSelectedModal(item: MemberModel) {\r\n      let memberList = [];\r\n      if (item.confirmed) {\r\n        memberList = this.orderedMemberList.filter((object) => object.confirmed);\r\n      } else {\r\n        memberList = this.orderedMemberList;\r\n      }\r\n      this.$modal.show('select-member-modal', {\r\n        memberList,\r\n        defaultSelection: [],\r\n        duplicatedStudent: item,\r\n      });\r\n    },\r\n    // ---刪除個別學生資料流程---\r\n    openRemoveModal(key: number) {\r\n      this.$modal.show('dialog', {\r\n        title: this.$t('確定刪除嗎?'),\r\n        text: this.$t('這個學生資料刪掉就不會再回來了'),\r\n        buttons: [\r\n          {\r\n            title: this.$t('取消'),\r\n            handler: () => {\r\n              this.$modal.hide('dialog');\r\n            },\r\n          },\r\n          {\r\n            title: this.$t('確定'),\r\n            handler: () => {\r\n              // remove operation\r\n              this.$modal.hide('dialog');\r\n              this.$emit('deleteStudent');\r\n              this.deleteStudent(key);\r\n            },\r\n          },\r\n        ],\r\n      });\r\n    },\r\n    async deleteStudent(index: number) {\r\n      console.log('刪除學生資料');\r\n      if (index >= 0 && index < this.orderedMemberList.length) {\r\n        MemberGroupApi.deleteMemberInMemberGroup(this.memberGroupId, this.orderedMemberList[index].uuid).then(() => {\r\n          this.memberList = this.orderedMemberList;\r\n          this.memberList.splice(index, 1);\r\n        });\r\n      }\r\n    },\r\n    orderArrayEditor(array: MemberModel[]) {\r\n      const tempArr = [] as MemberModel[];\r\n      const teacherArr = array.filter((object) => object.role === MemberRole.TEACHER);\r\n      const studentArr = array.filter((object) => object.role === MemberRole.STUDENT);\r\n      const duplicatedStudentArr = array.filter((object) => object.role === MemberRole.STUDENT_DUPLICATED);\r\n      const exemptedStudentArr = array.filter((object) => object.role === MemberRole.STUDENT_EXEMPTED);\r\n\r\n      const collator = new Intl.Collator('en', { numeric: true, sensitivity: 'base' });\r\n      const newTeacherArr = teacherArr.sort((a, b) => collator.compare(a.name.toUpperCase().trim(), b.name.toUpperCase().trim()));\r\n      const newStudentArr = studentArr.sort((a, b) => collator.compare(a.name.toUpperCase().trim(), b.name.toUpperCase().trim()));\r\n      const newDuplicatedStudentArr = duplicatedStudentArr.sort((a, b) => collator.compare(a.name.toUpperCase().trim(), b.name.toUpperCase().trim()));\r\n      const newExemptedStudentArr = exemptedStudentArr.sort((a, b) => collator.compare(a.name.toUpperCase().trim(), b.name.toUpperCase().trim()));\r\n\r\n      newTeacherArr.forEach((element) => {\r\n        tempArr.push(element);\r\n      });\r\n      newExemptedStudentArr.forEach((element) => {\r\n        tempArr.push(element);\r\n      });\r\n      newStudentArr.forEach((element) => {\r\n        tempArr.push(element);\r\n      });\r\n      newDuplicatedStudentArr.forEach((element) => {\r\n        tempArr.push(element);\r\n      });\r\n      return tempArr;\r\n    },\r\n  },\r\n});\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectMemberModal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SelectMemberModal.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SelectMemberModal.vue?vue&type=template&id=34adcc66&\"\nimport script from \"./SelectMemberModal.vue?vue&type=script&lang=ts&\"\nexport * from \"./SelectMemberModal.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MemberGroupMaker.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MemberGroupMaker.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MemberGroupMaker.vue?vue&type=template&id=400f40f1&scoped=true&\"\nimport script from \"./MemberGroupMaker.vue?vue&type=script&lang=ts&\"\nexport * from \"./MemberGroupMaker.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./MemberGroupMaker.vue?vue&type=style&index=0&id=400f40f1&scoped=true&lang=scss&\"\nimport style1 from \"./MemberGroupMaker.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"400f40f1\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MemberGroupMaker.vue?vue&type=style&index=0&id=400f40f1&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MemberGroupMaker.vue?vue&type=style&index=0&id=400f40f1&scoped=true&lang=scss&\"","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar sameValue = require('../internals/same-value');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@search logic\nfixRegExpWellKnownSymbolLogic('search', 1, function (SEARCH, nativeSearch, maybeCallNative) {\n  return [\n    // `String.prototype.search` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.search\n    function search(regexp) {\n      var O = requireObjectCoercible(this);\n      var searcher = regexp == undefined ? undefined : regexp[SEARCH];\n      return searcher !== undefined ? searcher.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n    },\n    // `RegExp.prototype[@@search]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@search\n    function (regexp) {\n      var res = maybeCallNative(nativeSearch, regexp, this);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      var previousLastIndex = rx.lastIndex;\n      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;\n      var result = regExpExec(rx, S);\n      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;\n      return result === null ? -1 : result.index;\n    }\n  ];\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('modal',{attrs:{\"name\":_vm.modalName,\"transition\":\"pop-out\",\"width\":_vm.modalWidth,\"focus-trap\":true,\"height\":224},on:{\"before-open\":_vm.beforeOpen}},[_c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"partition\"},[_c('div',{staticClass:\"partition-title\"},[_vm._v(\" \"+_vm._s(_vm.$t('修改objectType名稱', {objectType: _vm.objectType}))+\" \")]),_c('div',{staticClass:\"partition-form\"},[_c('form',{attrs:{\"autocomplete\":\"false\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.workspaceObjectName),expression:\"workspaceObjectName\"}],attrs:{\"id\":\"name\",\"type\":\"text\",\"placeholder\":_vm.objectType+'名稱'},domProps:{\"value\":(_vm.workspaceObjectName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.workspaceObjectName=$event.target.value}}})]),_c('p',{staticClass:\"remind\"},[_vm._v(\" \"+_vm._s(_vm.remind)+\" \")]),_c('div',{staticClass:\"button-set\"},[_c('button',{attrs:{\"id\":\"cencel-btn\"},on:{\"click\":_vm.handleCancel}},[_vm._v(\" \"+_vm._s(_vm.$t('取消'))+\" \")]),_c('button',{attrs:{\"id\":\"create-btn\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\" \"+_vm._s(_vm.$t('送出'))+\" \")])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from 'vue';\r\nimport MemberGroupApi from '@/apis/MemberGroupApi';\r\nimport { MemberGroupPreviewModel, UpdateMemberGroupPayload } from '@/apis/models/MemberGroupModel';\r\nimport {\r\n  WorkspaceObjectModel, WorkspaceObjectType, translate,\r\n} from '@/apis/models/WorkspaceObjectModel';\r\n\r\nimport FolderApi from '@/apis/FolderApi';\r\n\r\nconst MODAL_WIDTH = 656;\r\nexport default Vue.extend({\r\n  data() {\r\n    return {\r\n      translate,\r\n      modalName: 'update-workspace-object-name-modal',\r\n      modalWidth: MODAL_WIDTH,\r\n      remind: '',\r\n      workspaceObjectName: '',\r\n      workspaceObject: null as WorkspaceObjectModel | null,\r\n    };\r\n  },\r\n  computed: {\r\n    objectType(): string {\r\n      if (this.workspaceObject) {\r\n        return translate(this.workspaceObject.metadata.type);\r\n      }\r\n      return this.$t('未知').toString();\r\n    },\r\n  },\r\n  created() {\r\n    this.modalWidth = window.innerWidth < MODAL_WIDTH ? MODAL_WIDTH / 2 : MODAL_WIDTH;\r\n  },\r\n  methods: {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    beforeOpen(event: any) {\r\n      this.remind = '';\r\n      if (event.params.workspaceObject) {\r\n        this.workspaceObject = event.params.workspaceObject as WorkspaceObjectModel;\r\n        this.workspaceObjectName = this.workspaceObject.metadata.name;\r\n      }\r\n    },\r\n    handleCancel() {\r\n      console.log('取消');\r\n      this.$modal.hide(this.modalName);\r\n    },\r\n    async handleSubmit() {\r\n      if (!this.workspaceObject) return;\r\n\r\n      try {\r\n        switch (this.workspaceObject.metadata.type) {\r\n          case WorkspaceObjectType.MemberGroup: {\r\n            const regex = /^[^\\s_!¡?÷?¿/\\\\+=@#$%ˆ&*(){}|~<>;:[\\]]{2,}$/g;\r\n            console.log(this.workspaceObjectName.search(regex));\r\n            if (this.workspaceObjectName.search(regex) !== 0) {\r\n              throw new Error('只允許中文、英文及數字，且至少兩個字。不允許任何空白、特殊符號(~!@#$%^&*()_/)。');\r\n            }\r\n\r\n            this.remind = '';\r\n\r\n            const updatePaylaod = new UpdateMemberGroupPayload(this.workspaceObjectName);\r\n\r\n            const updatedMemberGroupObject = await MemberGroupApi.update(this.workspaceObject.uuid, updatePaylaod);\r\n            // update name and uniqueName\r\n            this.workspaceObject.metadata.name = updatedMemberGroupObject.metadata.name;\r\n            (this.workspaceObject as MemberGroupPreviewModel).uniqueName = updatedMemberGroupObject.uniqueName;\r\n\r\n            break;\r\n          }\r\n          case WorkspaceObjectType.Folder: {\r\n            const updatePaylaod = { name: this.workspaceObjectName };\r\n            await FolderApi.update(this.workspaceObject.uuid, updatePaylaod);\r\n            break;\r\n          }\r\n          default:\r\n            throw new Error('unknown object type');\r\n        }\r\n\r\n        this.$modal.hide(this.modalName);\r\n        this.$emit('submit');\r\n      } catch (error) {\r\n        // error pop up for user\r\n        // this.remind = error.message;\r\n        this.remind = '只允許中文、英文及數字，且至少兩個字。不允許任何空白、特殊符號(~!@#$%^&*()_/)。';\r\n        this.$notify({\r\n          type: 'error',\r\n          text: '只允許中文、英文及數字，且至少兩個字。不允許任何空白、特殊符號(~!@#$%^&*()_/)。',\r\n        });\r\n      }\r\n    },\r\n  },\r\n});\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateWorkspaceObjectNameModal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateWorkspaceObjectNameModal.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./UpdateWorkspaceObjectNameModal.vue?vue&type=template&id=2f82075e&\"\nimport script from \"./UpdateWorkspaceObjectNameModal.vue?vue&type=script&lang=ts&\"\nexport * from \"./UpdateWorkspaceObjectNameModal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./UpdateWorkspaceObjectNameModal.vue?vue&type=style&index=0&scope=true&lang=scss&\"\nimport style1 from \"./UpdateWorkspaceObjectNameModal.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateWorkspaceObjectNameModal.vue?vue&type=style&index=0&scope=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateWorkspaceObjectNameModal.vue?vue&type=style&index=0&scope=true&lang=scss&\"","/* eslint-disable max-classes-per-file */\r\nimport { WorkspaceObjectModel } from './WorkspaceObjectModel';\r\n\r\nexport interface MemberModel {\r\n  openEdit: boolean;\r\n  confirmed: boolean;\r\n  role: string;\r\n  uuid: string;\r\n  name: string;\r\n  businessDefinedId: string;\r\n  belongsTo: string;\r\n}\r\n\r\nexport class Member implements MemberModel {\r\n  uuid: string;\r\n\r\n  name: string;\r\n\r\n  businessDefinedId: string;\r\n\r\n  openEdit = false;\r\n\r\n  confirmed: boolean;\r\n\r\n  role: string;\r\n\r\n  belongsTo: string;\r\n\r\n  constructor(uuid: string, name: string, businessDefinedId: string, confirmed: boolean, role: string, belongsTo: string) {\r\n    this.uuid = uuid;\r\n    this.name = name;\r\n    this.businessDefinedId = businessDefinedId;\r\n    this.confirmed = confirmed;\r\n    this.role = role;\r\n    if (!belongsTo) {\r\n      this.belongsTo = uuid;\r\n    } else {\r\n      this.belongsTo = belongsTo;\r\n    }\r\n  }\r\n}\r\n\r\nexport class UpdateMemberPayload {\r\n  confirmed: boolean;\r\n\r\n  constructor(confirmed: boolean) {\r\n    this.confirmed = confirmed;\r\n  }\r\n}\r\n\r\nexport class UpdateMemberRolePayload {\r\n  role: string;\r\n\r\n  constructor(role: string) {\r\n    this.role = role;\r\n  }\r\n}\r\n\r\nexport class UpdateMemberGroupPayload {\r\n  name: string;\r\n\r\n  constructor(name: string) {\r\n    this.name = name;\r\n  }\r\n}\r\n\r\nexport class UpdateAutoConfirmPayload {\r\n  autoConfirm: boolean;\r\n\r\n  constructor(autoConfirm: boolean) {\r\n    this.autoConfirm = autoConfirm;\r\n  }\r\n}\r\n\r\nexport interface MemberGroupModel extends WorkspaceObjectModel {\r\n  uniqueName: string;\r\n  members: MemberModel[];\r\n  autoConfirm: boolean;\r\n}\r\n\r\nexport interface MemberGroupPreviewModel extends WorkspaceObjectModel {\r\n  uniqueName: string;\r\n  memberCount: number;\r\n  previewImageUrl: string;\r\n  autoConfirm: boolean;\r\n}\r\n\r\nexport interface BelongsToMembersModel extends MemberModel {\r\n  beDuplicatedStudent: MemberModel;\r\n  duplicatedStudent: MemberModel;\r\n}\r\n\r\nexport interface MemberGroupSentCountModel {\r\n  detail: Map<string, number>;\r\n  totalCount: number;\r\n}\r\n\r\nexport interface MemberRoleCount {\r\n  totalCount: number;\r\n  confirmedCount: number;\r\n  unconfirmedCount: number;\r\n  sentCount: number;\r\n  unsentCount: number;\r\n  chargedCount: number;\r\n  studentCount: number;\r\n  teacherCount: number;\r\n  repeatStudentCount: number;\r\n  exemptedStudentCount: number;\r\n}\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MemberGroupMaker.vue?vue&type=style&index=1&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MemberGroupMaker.vue?vue&type=style&index=1&lang=scss&\""],"sourceRoot":""}