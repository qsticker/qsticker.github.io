(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15684da7"],{"021b":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n("99af"),n("b0c0");var r=n("5530"),a=(n("96cf"),n("1da1")),s=n("d4ec"),o=n("bee2"),u=n("6ad1"),i=n("f52b"),c=function(){function t(){Object(s["a"])(this,t)}return Object(o["a"])(t,null,[{key:"create",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={name:n,parentId:e},t.next=3,u["a"].post("workspace/member-groups",JSON.stringify(r));case 3:return a=t.sent,t.abrupt("return",a.data.memberGroup);case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getMemberGroup",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,s,o,c,m,l,d,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].get("workspace/member-groups/".concat(e));case 2:for(n=t.sent,r=n.data.memberGroup.members,a=0;a<r.length;a+=1)s=r[a],o=s.uuid,c=s.name,m=s.businessDefinedId,l=s.confirmed,d=s.role,p=s.belongsTo,r[a]=new i["a"](o,c,m,l,d,p);return t.abrupt("return",n.data.memberGroup);case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(r["a"])({},n),t.next=3,u["a"].put("workspace/member-groups/".concat(e),a);case 3:return s=t.sent,t.abrupt("return",s.data.memberGroup);case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"deleteMemberInMemberGroup",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].delete("workspace/member-groups/".concat(e,"/members/").concat(n));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"updateMemberInMemberGroup",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n,a){var s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=Object(r["a"])({},a),t.next=3,u["a"].put("workspace/member-groups/".concat(e,"/members/").concat(n),s);case 3:return o=t.sent,t.abrupt("return",o.data);case 5:case"end":return t.stop()}}),t)})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"updateMemberRoleInMemberGroup",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n,a){var s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=Object(r["a"])({},a),t.next=3,u["a"].put("workspace/member-groups/".concat(e,"/set-member-role/").concat(n),s);case 3:return o=t.sent,t.abrupt("return",o.data);case 5:case"end":return t.stop()}}),t)})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"updateAutoConfirm",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(r["a"])({},n),t.next=3,u["a"].put("workspace/member-groups/updateAutoConfirm/".concat(e),a);case 3:return s=t.sent,t.abrupt("return",s.data);case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"updateBelongsTo",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n,r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].put("workspace/member-groups/".concat(e,"/set-member-belongsTo/").concat(n,"/").concat(r));case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"deleteBelongsTo",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].put("workspace/member-groups/".concat(e,"/set-member-belongsTo/").concat(n));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getSentCount",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n,r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].get("workspace/member-groups/send-count/".concat(e,"?start-time=").concat(n,"&end-time=").concat(r));case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})));function e(e,n,r){return t.apply(this,arguments)}return e}()}]),t}()},"0340":function(t,e,n){},"0ccb":function(t,e,n){var r=n("50c4"),a=n("1148"),s=n("1d80"),o=Math.ceil,u=function(t){return function(e,n,u){var i,c,m=String(s(e)),l=m.length,d=void 0===u?" ":String(u),p=r(n);return p<=l||""==d?m:(i=p-l,c=a.call(d,o(i/d.length)),c.length>i&&(c=c.slice(0,i)),t?m+c:c+m)}};t.exports={start:u(!1),end:u(!0)}},1148:function(t,e,n){"use strict";var r=n("a691"),a=n("1d80");t.exports="".repeat||function(t){var e=String(a(this)),n="",s=r(t);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))1&s&&(n+=e);return n}},"38dc":function(t,e,n){"use strict";n.r(e);var r,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"memberGroup-statistics"},[n("div",{staticClass:"top mx-2"},[n("div",{staticStyle:{"min-width":"110px"}},[t._v(" "+t._s(t.$t("我的班級"))+" ")])]),n("div",{staticClass:"title"},[n("h1",[t._v(t._s(t.$t("每月班級成員發送名單")))])]),n("div",{staticClass:"select-area"},[n("div",{staticClass:"select-date"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.dateData.year,expression:"dateData.year"}],attrs:{id:"year",name:"year"},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.dateData,"year",e.target.multiple?n:n[0])},function(e){return t.getMonths()}]}},t._l(t.years,(function(e,r){return n("option",{key:r,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0),n("select",{directives:[{name:"model",rawName:"v-model",value:t.dateData.month,expression:"dateData.month"}],attrs:{id:"month",name:"month"},on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.dateData,"month",e.target.multiple?n:n[0])},function(e){return t.getDays()}]}},t._l(t.months,(function(e,r){return n("option",{key:r,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0)]),n("div",{staticClass:"select-btn"},[n("b-button",{on:{click:function(e){return e.preventDefault(),t.openSelectMemberGroupModal(e)}}},[t._v(" "+t._s(t.$t("選擇班級"))+" ")]),n("SelectMemberGroupModal",{attrs:{"share-group-hidden":t.shareGroupHidden},on:{"submit-selection":t.updateSelectedMemberGroup}})],1)]),n("MemberGroupPreviewCard",{attrs:{"member-role-count":t.memberRoleCount,"member-groups":t.myMemberGroups,owner:t.owner}}),n("div",{staticClass:"p-4"},[t.workspaceObjects.length>0?n("div",{staticClass:"workspace-objects"},[t.myMemberGroups.length>1?n("div",{staticClass:"search-area"},[n("div",{staticClass:"input-group"},[t._m(0),t.workspaceObjects[0]&&"WorkspaceMemberGroup"===t.workspaceObjects[0].metadata.type?n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchString,expression:"searchString"}],staticClass:"form-control",attrs:{id:"search",type:"text",placeholder:t.$t("請輸入班級名稱")},domProps:{value:t.searchString},on:{input:function(e){e.target.composing||(t.searchString=e.target.value)}}}):t._e(),t.searchString?n("div",{staticClass:"input-group-prepend"},[n("button",{staticClass:"input-group-text clear-btn",on:{click:function(e){t.searchString=""}}},[n("i",{staticClass:"fas fa-times"})])]):t._e()])]):t._e(),n("transition-group",{staticClass:"transition-tag",attrs:{name:"list-complete",tag:"div"}},t._l(t.filteredMethodList,(function(e,r){return n("div",{key:e.uuid,staticClass:"eventItem"},[t.memberGroupModels.length===t.memberCountMaps.length?n("MemberGroupDetailsCard",{attrs:{index:r+1,"member-group":t.memberGroupModels[r],"sent-count-map":t.memberCountMaps[r],"sigle-member-count":t.sigleMemberCountList[r]}}):t._e()],1)})),0)],1):t._e()]),0===t.workspaceObjects.length?n("div",[n("EmptyHint")],1):t._e()],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group-prepend"},[n("label",{staticClass:"input-group-text",attrs:{for:"search"}},[n("i",{staticClass:"fas fa-search"})])])}],o=(n("99af"),n("4160"),n("c975"),n("b0c0"),n("d3b7"),n("3ca3"),n("4d90"),n("498a"),n("159b"),n("ddb0"),n("96cf"),n("1da1")),u=n("2b0e"),i=n("5870"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"member-group-info"},[t.memberGroup?n("div",[n("table",{staticClass:"preview"},[n("tr",[n("th",{staticClass:"group-title",attrs:{rowspan:"2"}},[t._v(" "+t._s(t.$t("班級名稱"))+" ")]),n("th",{staticClass:"num bottom-bar",attrs:{colspan:"4"}},[t._v(" "+t._s(t.$t("有發送紀錄的人次"))+" ("+t._s(t.sigleMemberCount.sentCount)+") ")]),n("th",{staticClass:"num",attrs:{rowspan:"2"}},[t._v(" "+t._s(t.$t("無發送紀錄的人次"))+" ")]),n("th",{staticClass:"num total-count",attrs:{rowspan:"2"}},[t._v(" "+t._s(t.$t("班級總人次"))+" ")])]),n("tr",[n("th",{staticClass:"num teacher-count",attrs:{width:"80"}},[t._v(" "+t._s(t.$t("老師"))+" ")]),n("th",{staticClass:"num student-count",attrs:{width:"80"}},[t._v(" "+t._s(t.$t("學生"))+" ")]),n("th",{staticClass:"num repeatStudent-count",attrs:{width:"80"}},[t._v(" "+t._s(t.$t("重複學生"))+" ")]),n("th",{staticClass:"num exemptedStudent-count",attrs:{width:"80"}},[t._v(" "+t._s(t.$t("特例學生"))+" ")])]),n("tr",[n("td",{staticClass:"unique-name"},[t._v(" "+t._s(t.memberGroup.uniqueName)+" ")]),n("td",{staticClass:"num"},[t._v(" "+t._s(t.sigleMemberCount.teacherCount)+" ")]),n("td",{staticClass:"num blue"},[t._v(" "+t._s(t.sigleMemberCount.studentCount)+" ")]),n("td",{staticClass:"num"},[t._v(" "+t._s(t.sigleMemberCount.repeatStudentCount)+" ")]),n("td",{staticClass:"num"},[t._v(" "+t._s(t.sigleMemberCount.exemptedStudentCount)+" ")]),n("td",{staticClass:"num"},[t._v(" "+t._s(t.sigleMemberCount.unsentCount)+" ")]),n("td",{staticClass:"num total"},[t._v(" "+t._s(t.memberGroup.members.length)+" ")])])]),n("div",{staticClass:"member-list"},[t.memberGroup.members.length>0?n("table",{staticClass:"table table-sm"},[n("tr",[n("th",{staticClass:"width50"},[t._v(" "+t._s(t.$t("序號"))+" ")]),n("th",{staticClass:"width200"},[t._v(" "+t._s(t.$t("姓名"))+" ")]),n("th",{staticClass:"width150"},[t._v(" "+t._s(t.$t("代號"))+" ")]),n("th",{staticClass:"width100"},[t._v(" "+t._s(t.$t("審核狀態"))+" ")]),n("th",{staticClass:"width100"},[t._v(" "+t._s(t.$t("成員角色"))+" ")]),n("th",{staticClass:"width150"},[t._v(" "+t._s(t.$t("備註"))+" ")]),n("th",{staticClass:"width150"},[t._v(" "+t._s(t.$t("發送紀錄"))+" ")])]),t._l(t.orderedMembers,(function(e,r){return n("tr",{key:r,staticClass:"data"},[n("td",[t._v(t._s(r+1))]),n("td",[t._v(" "+t._s(e.name)+" ")]),n("td",[t._v(t._s(e.businessDefinedId))]),n("td",[!1===e.confirmed?n("div",{staticClass:"to-be-confirmed-td"},[t._v(" "+t._s(t.$t("待審核"))+" ")]):t._e(),!0===e.confirmed?n("div",{staticClass:"confirmed-td"},[t._v(" "+t._s(t.$t("已審核"))+" ")]):t._e()]),e.role===t.MemberRole.STUDENT?n("td",[t._v(" "+t._s(t.$t("一般學生"))+" ")]):t._e(),e.role===t.MemberRole.TEACHER?n("td",[t._v(" "+t._s(t.$t("老師"))+" ")]):t._e(),e.role===t.MemberRole.STUDENT_DUPLICATED?n("td",[t._v(" "+t._s(t.$t("重複學生"))+" ")]):t._e(),e.role===t.MemberRole.STUDENT_EXEMPTED?n("td",[t._v(" "+t._s(t.$t("特例學生"))+" ")]):t._e(),e.belongsTo!==e.uuid?n("td",[t._v(" "+t._s(t.belongsToMemberName(e.belongsTo))+" ")]):t._e(),e.belongsTo===e.uuid?n("td",[t.checkMemberBeDuplicated(e)?n("span",[t._v(" "+t._s(t.$t("已設為重複對象"))+" ")]):t._e()]):t._e(),n("td",[t.sentCountMap.get(e.uuid)>0?n("span",[t._v("v")]):t._e()])])}))],2):t._e()])]):t._e()])},m=[],l=(n("4de4"),n("4ec9"),n("a9e3"),n("aa73"));(function(t){t["STUDENT"]="STUDENT",t["TEACHER"]="TEACHER",t["STUDENT_DUPLICATED"]="STUDENT_DUPLICATED",t["STUDENT_EXEMPTED"]="STUDENT_EXEMPTED"})(r||(r={}));var d,p=u["default"].extend({components:{},props:{index:{type:Number,default:0},memberGroup:{type:Object,default:null},sentCountMap:{type:Map,default:null},sigleMemberCount:{type:Object,default:function(){return{confirmedCount:0,unconfirmedCount:0,sentCount:0,unsentCount:0,chargedCount:0,studentCount:0,teacherCount:0,repeatStudentCount:0,exemptedStudentCount:0}}}},data:function(){return{MemberRole:r}},computed:{orderedMembers:function(){if(this.memberGroup){var t=[],e=[];this.memberGroup.members.forEach((function(n){n.confirmed?t.push(n):e.push(n)})),t=this.orderArrayEditor(t),e=this.orderArrayEditor(e);var n=[];return t.forEach((function(t){n.push(t)})),e.forEach((function(t){n.push(t)})),0===n.length?this.memberGroup.members:n}return[]}},mounted:function(){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:l["a"].loginCheck();case 1:case"end":return t.stop()}}),t)})))()},methods:{checkMemberBeDuplicated:function(t){var e=!1;return this.memberGroup&&this.memberGroup.members.forEach((function(n){e||n!==t&&n.belongsTo===t.uuid&&(e=!0)})),e},belongsToMemberName:function(t){var e="";return this.memberGroup&&this.memberGroup.members.forEach((function(n){n.uuid===t&&(e=n.name)})),e},orderArrayEditor:function(t){var e=[],n=t.filter((function(t){return t.role===r.TEACHER})),a=t.filter((function(t){return t.role===r.STUDENT})),s=t.filter((function(t){return t.role===r.STUDENT_DUPLICATED})),o=t.filter((function(t){return t.role===r.STUDENT_EXEMPTED})),u=new Intl.Collator("en",{numeric:!0,sensitivity:"base"}),i=n.sort((function(t,e){return u.compare(t.name.toUpperCase().trim(),e.name.toUpperCase().trim())})),c=a.sort((function(t,e){return u.compare(t.name.toUpperCase().trim(),e.name.toUpperCase().trim())})),m=s.sort((function(t,e){return u.compare(t.name.toUpperCase().trim(),e.name.toUpperCase().trim())})),l=o.sort((function(t,e){return u.compare(t.name.toUpperCase().trim(),e.name.toUpperCase().trim())}));return i.forEach((function(t){e.push(t)})),l.forEach((function(t){e.push(t)})),c.forEach((function(t){e.push(t)})),m.forEach((function(t){e.push(t)})),e}}}),h=p,f=(n("f79e"),n("2877")),b=Object(f["a"])(h,c,m,!1,null,"43cf7e24",null),C=b.exports,v=n("d98b"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"member-group-preview-card"},[t._m(0),n("div",{staticClass:"top-info"},[n("div",{staticClass:"preview-area"},[n("div",{staticClass:"subtitle"},[n("h4",[t._v(" "+t._s(t.$t("班級資訊")))])]),n("div",{staticClass:"preview-items"},[n("div",{staticClass:"item"},[n("label",[t._v(t._s(t.$t("班級擁有者"))+"：")]),n("div",{staticClass:"content"},[t._v(" "+t._s(t.owner)+" ")])]),n("div",{staticClass:"item"},[n("label",[t._v(t._s(t.$t("班級名稱"))+"：")]),n("div",{staticClass:"unique-name"},t._l(t.groupNames,(function(e,r){return n("div",{key:r},[n("div",{staticClass:"text"},[t.groupNames.length>1?n("span",[t._v(t._s(r+1)+".")]):t._e(),n("span",[t._v(t._s(e))])])])})),0)])])]),n("div",{staticClass:"member-preview"},[n("div",{staticClass:"subtitle"},[n("h4",[t._v(" "+t._s(t.$t("人數統計")))])]),n("div",{staticClass:"preview-items"},[n("div",{staticClass:"item item-hr"},[n("label",[t._v(t._s(t.$t("已發送測驗學生數"))+"：")]),n("div",{staticClass:"num blue"},[t._v(" "+t._s(t.memberRoleCount.chargedCount)+" ")])]),n("div",{staticClass:"item"},[n("label",[t._v(t._s(t.$t("有發送紀錄的人次")))]),n("div",{staticClass:"num"},[t._v(" "+t._s(t.memberRoleCount.sentCount)+" ")])]),n("div",{staticClass:"sent-role item-hr"},[n("div",{staticClass:"item"},[n("label",[t._v(t._s(t.$t("老師數"))+"：")]),n("div",{staticClass:"num"},[t._v(" "+t._s(t.memberRoleCount.teacherCount)+" ")])]),n("div",{staticClass:"item"},[n("label",[t._v(t._s(t.$t("學生數"))+"：")]),n("div",{staticClass:"num"},[t._v(" "+t._s(t.memberRoleCount.studentCount)+" ")])]),n("div",{staticClass:"item"},[n("label",[t._v(t._s(t.$t("重複學生數"))+"：")]),n("div",{staticClass:"num"},[t._v(" "+t._s(t.memberRoleCount.repeatStudentCount)+" ")])]),n("div",{staticClass:"item"},[n("label",[t._v(t._s(t.$t("特例學生數"))+"：")]),n("div",{staticClass:"num"},[t._v(" "+t._s(t.memberRoleCount.exemptedStudentCount)+" ")])])]),n("div",{staticClass:"item item-hr"},[n("label",[t._v(t._s(t.$t("無發送紀錄的人次"))+"：")]),n("div",{staticClass:"num"},[t._v(" "+t._s(t.memberRoleCount.unsentCount)+" ")])]),n("div",{staticClass:"item item-hr"},[n("label",[t._v(t._s(t.$t("總人次"))+"：")]),n("div",{staticClass:"num"},[t._v(" "+t._s(t.memberRoleCount.totalCount)+" ")])])])])])])},_=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"download"},[n("i",{staticClass:"fas fa-download d-none"})])}];(function(t){t["STUDENT"]="STUDENT",t["TEACHER"]="TEACHER",t["STUDENT_DUPLICATED"]="STUDENT_DUPLICATED",t["STUDENT_EXEMPTED"]="STUDENT_EXEMPTED"})(d||(d={}));var w,E=u["default"].extend({components:{},props:{memberGroups:{type:Array,default:function(){return[]}},owner:{type:String,default:""},memberRoleCount:{type:Object,default:function(){return{}}}},data:function(){return{MemberRole:d,groupNames:[]}},computed:{isLoading:function(){return this.$store.state.isLoading}},watch:{memberGroups:function(){this.groupNames=[],this.setGroupNames()}},mounted:function(){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:l["a"].loginCheck();case 1:case"end":return t.stop()}}),t)})))()},methods:{setGroupNames:function(){var t=this;this.memberGroups.forEach((function(e){t.groupNames.push(e.uniqueName)}))}}}),M=E,T=(n("576b"),Object(f["a"])(M,g,_,!1,null,"dea52d4e",null)),S=T.exports,D=n("021b"),R=n("4523");(function(t){t["STUDENT"]="STUDENT",t["TEACHER"]="TEACHER",t["STUDENT_DUPLICATED"]="STUDENT_DUPLICATED",t["STUDENT_EXEMPTED"]="STUDENT_EXEMPTED"})(w||(w={}));var y=u["default"].extend({components:{SelectMemberGroupModal:i["a"],MemberGroupPreviewCard:S,MemberGroupDetailsCard:C,EmptyHint:v["a"]},data:function(){return{MemberRole:w,myMemberGroups:[],selection:[],selectModeOpen:!1,searchString:"",shareGroupHidden:!0,currentYear:(new Date).getFullYear(),currentMonth:(new Date).getMonth()+1,minYear:2023,minMonth:7,years:[],months:[],dateData:{year:0,month:0,endDate:0},memberGroupModels:[],memberCountMaps:[],singleTotalList:[],totalCount:0,sigleMemberCountList:[],memberRoleCount:{totalCount:0,confirmedCount:0,unconfirmedCount:0,sentCount:0,unsentCount:0,chargedCount:0,studentCount:0,teacherCount:0,repeatStudentCount:0,exemptedStudentCount:0}}},computed:{isLoading:function(){return this.$store.state.isLoading},owner:function(){return this.$store.state.profile.username},workspaceObjects:function(){if(this.myMemberGroups){var t=this.myMemberGroups,e=new Intl.Collator("en",{numeric:!0,sensitivity:"base"});return t.sort((function(t,n){return e.compare(t.metadata.name.toUpperCase().trim(),n.metadata.name.toUpperCase().trim())}))}return[]},trimSearchString:function(){var t=this.searchString.trim();return t},searchList:function(){var t=this,e=[];return this.workspaceObjects.forEach((function(n){var r="";r=n.uniqueName;var a=t.trimSearchString,s=r.toUpperCase().indexOf(a.toUpperCase());s>=0&&e.push(n)})),e},filteredMethodList:function(){return""!==this.trimSearchString?this.searchList:this.workspaceObjects},selectedDate:function(){return"".concat(this.dateData.year," ").concat(this.dateData.month)}},watch:{selectedDate:function(){this.getInitData()},singleTotalList:function(){this.totalMembersCounter()},sigleMemberCountList:function(){this.totalMemberRoleCounter()}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l["a"].loginCheck(),t.getYears(),t.getMonths(),t.getDays();case 4:case"end":return e.stop()}}),e)})))()},methods:{getInitData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.resetCounter(),t.$store.commit("updateLoading",!0),e.prev=2,n=[],r=[],t.myMemberGroups.forEach((function(t){n.push(D["a"].getMemberGroup(t.uuid))})),t.myMemberGroups.forEach((function(e){r.push(t.getSentCount(e.uuid))})),e.next=9,Promise.all(n);case 9:return t.memberGroupModels=e.sent,e.next=12,Promise.all(r);case 12:t.memberCountMaps=e.sent,t.singleMemberCounter();case 14:return e.prev=14,t.$store.commit("updateLoading",!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,,14,17]])})))()},getSentCount:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=String(e.dateData.month).padStart(2,"0"),n.abrupt("return",D["a"].getSentCount(t,"".concat(e.dateData.year,"-").concat(r,"-01 00:00:00'"),"".concat(e.dateData.year,"-").concat(r,"-").concat(e.dateData.endDate," 00:00:00'")).then((function(t){return R["a"].getJsMap(t.detail)})));case 2:case"end":return n.stop()}}),n)})))()},singleMemberCounter:function(){var t=this;if(this.memberGroupModels.length===this.memberCountMaps.length)for(var e=function(e){var n=t.memberGroupModels[e],r=t.memberCountMaps[e],a={totalCount:0,confirmedCount:0,unconfirmedCount:0,sentCount:0,unsentCount:0,chargedCount:0,studentCount:0,teacherCount:0,repeatStudentCount:0,exemptedStudentCount:0},s=0;n.members.forEach((function(t){s+=1,a.totalCount+=1,t.confirmed?a.confirmedCount+=1:a.unconfirmedCount+=1;var e=r.get(t.uuid),n=!1;e&&e>0&&(n=!0),n?(a.sentCount+=1,t.role===w.TEACHER?a.teacherCount+=1:t.role===w.STUDENT?(a.chargedCount+=1,a.studentCount+=1):t.role===w.STUDENT_DUPLICATED?a.repeatStudentCount+=1:t.role===w.STUDENT_EXEMPTED&&(a.exemptedStudentCount+=1)):a.unsentCount+=1})),t.singleTotalList.push(s),t.sigleMemberCountList.push(a)},n=0;n<this.memberGroupModels.length;n+=1)e(n)},totalMembersCounter:function(){var t=this;this.singleTotalList.forEach((function(e){t.totalCount+=e}))},totalMemberRoleCounter:function(){var t=this;this.sigleMemberCountList.forEach((function(e){t.memberRoleCount.totalCount+=e.totalCount,t.memberRoleCount.confirmedCount+=e.confirmedCount,t.memberRoleCount.unconfirmedCount+=e.unconfirmedCount,t.memberRoleCount.sentCount+=e.sentCount,t.memberRoleCount.unsentCount+=e.unsentCount,t.memberRoleCount.chargedCount+=e.chargedCount,t.memberRoleCount.studentCount+=e.studentCount,t.memberRoleCount.teacherCount+=e.teacherCount,t.memberRoleCount.repeatStudentCount+=e.repeatStudentCount,t.memberRoleCount.exemptedStudentCount+=e.exemptedStudentCount}))},resetCounter:function(){this.sigleMemberCountList=[],this.memberRoleCount.totalCount=0,this.memberRoleCount.confirmedCount=0,this.memberRoleCount.unconfirmedCount=0,this.memberRoleCount.sentCount=0,this.memberRoleCount.unsentCount=0,this.memberRoleCount.chargedCount=0,this.memberRoleCount.studentCount=0,this.memberRoleCount.teacherCount=0,this.memberRoleCount.repeatStudentCount=0,this.memberRoleCount.exemptedStudentCount=0,this.singleTotalList=[],this.totalCount=0},getYears:function(){for(var t=this.minYear;t<=this.currentYear;t+=1)this.years.push(t);this.dateData.year=this.currentYear},getMonths:function(){if(this.months=[],this.dateData.month=this.currentMonth,this.dateData.year===this.minYear&&this.currentYear===this.minYear)for(var t=this.minMonth;t<=this.currentMonth;t+=1)this.months.push(t);else if(this.dateData.year===this.minYear&&this.currentYear!==this.minYear)for(var e=this.minMonth;e<=12;e+=1)this.months.push(e);else if(this.dateData.year===this.currentYear)for(var n=1;n<=this.dateData.month;n+=1)this.months.push(n);else for(var r=1;r<=12;r+=1)this.months.push(r)},getDays:function(){var t=[31,28,31,30,31,30,31,31,30,31,30,31];this.dateData.endDate=t[this.dateData.month-1]},openSelectMemberGroupModal:function(){this.$modal.show("select-member-group-modal",{defaultSelection:this.myMemberGroups})},updateSelectedMemberGroup:function(t){if(!this.myMemberGroups)throw new Error("quiz event not ready");var e=new Intl.Collator("en",{numeric:!0,sensitivity:"base"});t.sort((function(t,n){return e.compare(t.metadata.name.toUpperCase().trim(),n.metadata.name.toUpperCase().trim())})),this.myMemberGroups=t,this.getInitData()}}}),k=y,x=(n("bf4e"),n("40ba"),Object(f["a"])(k,a,s,!1,null,"a74e7cc2",null));e["default"]=x.exports},"40ba":function(t,e,n){"use strict";var r=n("fbc5"),a=n.n(r);a.a},"4d90":function(t,e,n){"use strict";var r=n("23e7"),a=n("0ccb").start,s=n("9a0c");r({target:"String",proto:!0,forced:s},{padStart:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"576b":function(t,e,n){"use strict";var r=n("0340"),a=n.n(r);a.a},5870:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{staticClass:"modal-container",attrs:{name:"select-member-group-modal",transition:"pop-out",width:"640","focus-trap":!0,height:"640"},on:{"before-open":t.beforeOpen}},[t.memberLocalRootId&&t.memberShareRootId?n("WorkspaceObjectSelector",{attrs:{"local-root-id":t.memberLocalRootId,"share-root-id":t.memberShareRootId,"default-selection":t.defaultSelection,"local-root-name":t.$t(t.rootName),"allow-select-many":!0,"display-select-all-toggle":t.displaySelectAllToggle,"share-group-hidden":t.shareGroupHidden},on:{"submit-selection":t.handleSubmit,cancel:t.handleCancel}}):n("loading",{attrs:{active:!0,"is-full-page":!1,"background-color":"transparent"}})],1)},a=[],s=n("2b0e"),o=n("5da8"),u=s["default"].extend({components:{WorkspaceObjectSelector:o["a"]},props:{shareGroupHidden:{type:Boolean,default:!1}},data:function(){return{defaultSelection:[],rootName:"我的班級",displaySelectAllToggle:!0}},computed:{memberLocalRootId:function(){return this.$store.state.currentWorkspace?this.$store.state.currentWorkspace.memberFolders.local:null},memberShareRootId:function(){return this.$store.state.currentWorkspace?this.$store.state.currentWorkspace.memberFolders.share:null}},methods:{beforeOpen:function(t){t.params.defaultSelection&&(this.defaultSelection=t.params.defaultSelection)},handleSubmit:function(t){this.$emit("submit-selection",t),this.$modal.hide("select-member-group-modal")},handleCancel:function(){this.$modal.hide("select-member-group-modal")}}}),i=u,c=n("2877"),m=Object(c["a"])(i,r,a,!1,null,null,null);e["a"]=m.exports},6129:function(t,e,n){},"70f6":function(t,e,n){},"9a0c":function(t,e,n){var r=n("342f");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},bf4e:function(t,e,n){"use strict";var r=n("70f6"),a=n.n(r);a.a},d98b:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"empty-hint-container"},[t._v(" "+t._s(t.$t("目前尚無任何內容"))+" ")])},a=[],s=n("2b0e"),o=s["default"].extend({name:"EmptyHint"}),u=o,i=(n("f74c"),n("2877")),c=Object(i["a"])(u,r,a,!1,null,null,null);e["a"]=c.exports},f52b:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return o})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return i}));n("b0c0");var r=n("d4ec"),a=function t(e,n,a,s,o,u){Object(r["a"])(this,t),this.openEdit=!1,this.uuid=e,this.name=n,this.businessDefinedId=a,this.confirmed=s,this.role=o,this.belongsTo=u||e},s=function t(e){Object(r["a"])(this,t),this.confirmed=e},o=function t(e){Object(r["a"])(this,t),this.role=e},u=function t(e){Object(r["a"])(this,t),this.name=e},i=function t(e){Object(r["a"])(this,t),this.autoConfirm=e}},f74c:function(t,e,n){"use strict";var r=n("6129"),a=n.n(r);a.a},f79e:function(t,e,n){"use strict";var r=n("f972"),a=n.n(r);a.a},f972:function(t,e,n){},fbc5:function(t,e,n){}}]);
//# sourceMappingURL=chunk-15684da7.d7e3861a.js.map