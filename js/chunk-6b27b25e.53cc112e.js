(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b27b25e"],{"226e":function(e,t,a){},"5f2b":function(e,t,a){"use strict";a.r(t);var r,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"workspace-browser"},[a("div",{staticClass:"top mx-2"},[a("div",{staticStyle:{"min-width":"110px"}},[e.currentFolder?a("Breadcrumb",{attrs:{situation:"workspaceBrower",path:e.currentFolder.path},on:{visitFolder:e.visitFolder}}):e._e()],1),a("div",{staticClass:"action-area p-4"},[e.selectModeOpen&&e.selection.length>0?a("div",{staticClass:"action-btns"},[a("div",{staticClass:"buttons"},[1===e.selection.length?a("b-button",{staticClass:"btn-share",on:{click:function(t){return t.preventDefault(),e.shareCards(t)}}},[a("i",{staticClass:"fas fa-user-plus"}),a("span",{staticClass:"remind"},[e._v(e._s(e.$t("共用")))])]):e._e(),1===e.selection.length&&"WorkspaceFolder"!==e.selection[0].metadata.type?a("b-button",{staticClass:"btn-preview",on:{click:function(t){return t.preventDefault(),e.enterGroupPreview(t)}}},[a("i",{staticClass:"fas fa-eye"}),a("span",{staticClass:"remind"},[e._v(e._s(e.$t("檢視")))])]):e._e(),1===e.selection.length&&"WorkspaceFolder"!==e.selection[0].metadata.type?a("b-button",{staticClass:"btn-edit",on:{click:function(t){return t.preventDefault(),e.enterGroup(t)}}},[a("i",{staticClass:"fas fa-pen"}),a("span",{staticClass:"remind"},[e._v(e._s(e.$t("編輯")))])]):e._e(),1===e.selection.length&&"WorkspaceFolder"===e.selection[0].metadata.type?a("b-button",{staticClass:"btn-edit-name",on:{click:function(t){return t.preventDefault(),e.$modal.show("update-workspace-object-name-modal",{workspaceObject:e.selection[0]})}}},[a("i",{staticClass:"fas fa-pen"}),a("span",{staticClass:"remind"},[e._v(e._s(e.$t("編輯")))])]):e._e(),a("b-button",{staticClass:"btn-remove",on:{click:function(t){return t.preventDefault(),e.removeCards(t)}}},[a("i",{staticClass:"fas fa-trash-alt"}),a("span",{staticClass:"remind"},[e._v(e._s(e.$t("移除")))])]),a("b-button",{staticClass:"btn-move",on:{click:function(t){return t.preventDefault(),e.moveCards(t)}}},[a("i",{staticClass:"fas fa-arrows-alt"}),a("span",{staticClass:"remind"},[e._v(e._s(e.$t("移至")))])])],1)]):e._e(),e.$route.path.includes("share")?e._e():a("div",{staticClass:"btn-area"},[a("button",{staticClass:"select-btn btn btn-secondary",on:{click:e.toggleSelectMode}},[e.selectModeOpen?a("span",[e._v(e._s(e.$t("取消")))]):e._e(),e.selectModeOpen?e._e():a("span",[e._v(e._s(e.$t("選取")))])]),a("button",{staticClass:"display-btn btn",on:{click:e.toggleCardDisplayMode}},["list-mode"===e.cardDisplayMode?a("span",[a("i",{staticClass:"fas fa-th"})]):e._e(),"pic-mode"===e.cardDisplayMode?a("span",[a("i",{staticClass:"fas fa-bars"})]):e._e()])])])]),a("div",{staticClass:"p-4"},[e.subfolders.length>0?a("div",{staticClass:"folder-area mb-4"},[a("h1",{staticClass:"m-3"},[e._v(" "+e._s(e.$t("資料夾"))+" ")]),a("FolderList",{attrs:{subfolders:e.subfolders,selection:e.selection,"select-mode-open":e.selectModeOpen},on:{toggle:e.toggleSelection}})],1):e._e(),e.workspaceObjects.length>0?a("div",{staticClass:"workspace-objects"},[a("div",{staticClass:"search-area"},[a("h1",{staticClass:"ml-3"},[e._v(" "+e._s(e.$t("檔案"))+" ")]),a("div",{staticClass:"input-group"},[e._m(0),e.workspaceObjects[0]&&"WorkspaceQuizGroup"===e.workspaceObjects[0].metadata.type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchString,expression:"searchString"}],staticClass:"form-control",attrs:{id:"search",type:"text",placeholder:e.$t("請輸入題組名稱")},domProps:{value:e.searchString},on:{input:function(t){t.target.composing||(e.searchString=t.target.value)}}}):e._e(),e.workspaceObjects[0]&&"WorkspaceMemberGroup"===e.workspaceObjects[0].metadata.type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchString,expression:"searchString"}],staticClass:"form-control",attrs:{id:"search",type:"text",placeholder:e.$t("請輸入班級名稱")},domProps:{value:e.searchString},on:{input:function(t){t.target.composing||(e.searchString=t.target.value)}}}):e._e(),e.workspaceObjects[0]&&"WorkspaceSoftLink"===e.workspaceObjects[0].metadata.type?a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchString,expression:"searchString"}],staticClass:"form-control",attrs:{id:"search",type:"text",placeholder:e.$t("請輸入名稱")},domProps:{value:e.searchString},on:{input:function(t){t.target.composing||(e.searchString=t.target.value)}}}):e._e(),e.searchString?a("div",{staticClass:"input-group-prepend"},[a("button",{staticClass:"input-group-text clear-btn",on:{click:function(t){e.searchString=""}}},[a("i",{staticClass:"fas fa-times"})])]):e._e()])]),"list-mode"===e.cardDisplayMode?a("div",{staticClass:"t-head"},[e.workspaceObjects[0]&&"WorkspaceQuizGroup"===e.workspaceObjects[0].metadata.type?a("div",{staticClass:"content"},[a("div",{staticClass:"group-title"},[e._v(" "+e._s(e.$t("題組名稱"))+" ")]),a("div",{staticClass:"member-count"},[e._v(" "+e._s(e.$t("總題數"))+" ")]),a("div",{staticClass:"btn-area"},[e._v(" "+e._s(e.$t("更多"))+" ")])]):e._e(),e.workspaceObjects[0]&&"WorkspaceMemberGroup"===e.workspaceObjects[0].metadata.type?a("div",{staticClass:"content"},[a("div",{staticClass:"group-title"},[a("span",[e._v(e._s(e.$t("班級名稱")))])]),a("div",{staticClass:"auto-confirm"},[e._v(" "+e._s(e.$t("自動審核"))+" ")]),a("div",{staticClass:"member-count"},[e._v(" "+e._s(e.$t("總人數"))+" ")]),a("div",{staticClass:"btn-area"},[e._v(" "+e._s(e.$t("更多"))+" ")])]):e._e(),e.workspaceObjects[0]&&"WorkspaceSoftLink"===e.workspaceObjects[0].metadata.type?a("div",{staticClass:"content"},[a("div",{staticClass:"group-title"},[a("span",[e._v(e._s(e.$t("名稱")))])]),a("div",{staticClass:"info"},[a("div",{staticClass:"permission"},[e._v(" "+e._s(e.$t("權限"))+" ")]),a("div",{staticClass:"count"},[e._v(" "+e._s(e.$t("總數"))+" ")]),a("div",{staticClass:"onwer"},[e._v(" "+e._s(e.$t("擁有者"))+" ")])]),a("div",{staticClass:"btn-area"},[e._v(" "+e._s(e.$t("更多"))+" ")])]):e._e()]):e._e(),a("transition-group",{staticClass:"transition-tag",attrs:{name:"list-complete",tag:"div"}},e._l(e.filteredMethodList,(function(t,r){return a("div",{key:t.uuid,class:{eventItem:"list-mode"===e.cardDisplayMode,"my-3":"pic-mode"===e.cardDisplayMode,"list-complete-item":"pic-mode"===e.cardDisplayMode,"col-lg-4":"pic-mode"===e.cardDisplayMode,"col-xl-3":"pic-mode"===e.cardDisplayMode,"ui-card":"pic-mode"===e.cardDisplayMode}},[a("div",{staticClass:"selectedItem"},[a("WorkspaceObjectItem",{attrs:{"workspace-object":t,"default-selected":!1,"allow-select-many":!0,"select-mode-open":e.selectModeOpen,selection:e.selection,index:r+1,"display-mode":"workspaceSelectFile"},on:{toggle:function(a){return e.toggleSelection(t)},removeMe:function(a){return e.removeGroupCard(t)},copyGroupCard:function(a){return e.copyGroupCard(t)},copyMemberGroupCard:function(a){return e.copyMemberGroupCard(t)}}})],1)])})),0)],1):e._e(),0===e.workspaceObjects.length&&0===e.subfolders.length?a("div",[a("EmptyHint")],1):e._e()]),a("MovePositionModal",{attrs:{selection:e.selection,current:e.currentFolder},on:{submit:e.moveCardsSubmit}}),a("UpdateWorkspaceObjectNameModal",{on:{submit:e.reload}}),a("v-dialog")],1)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("label",{staticClass:"input-group-text",attrs:{for:"search"}},[a("i",{staticClass:"fas fa-search"})])])}],n=(a("99af"),a("4de4"),a("c740"),a("4160"),a("c975"),a("a434"),a("b0c0"),a("d3b7"),a("3ca3"),a("498a"),a("159b"),a("ddb0"),a("96cf"),a("1da1")),i=a("2b0e"),c=a("d98b"),l=a("aa73"),u=a("0ccf"),d=a("f410"),p=a("b26e"),m=a("010d"),h=a("8eb5"),v=a("dcc1"),f=a("add5");(function(e){e["Folder"]="WorkspaceFolder",e["QuizGroup"]="WorkspaceQuizGroup",e["MemberGroup"]="WorkspaceMemberGroup",e["QuizEvent"]="WorkspaceQuizEvent",e["SoftLink"]="WorkspaceSoftLink"})(r||(r={}));var b=i["default"].extend({components:{EmptyHint:c["a"],FolderList:u["a"],Breadcrumb:m["a"],WorkspaceObjectItem:h["a"],MovePositionModal:v["a"],UpdateWorkspaceObjectNameModal:f["a"]},data:function(){return{selection:[],selectModeOpen:!1,searchString:""}},computed:{isLoading:function(){return this.$store.state.isLoading},currentFolder:function(){return this.$store.state.currentFolder},cardDisplayMode:function(){return this.$store.state.cardDisplayMode},subfolders:function(){if(this.currentFolder){var e=this.currentFolder.children.filter((function(e){return e.metadata.type===r.Folder})),t=this.currentFolder.children.filter((function(e){var t=e.metadata.type===r.SoftLink&&e.sourceObject&&e.sourceObject.metadata.type===r.Folder;return t})),a=new Intl.Collator("en",{numeric:!0,sensitivity:"base"});return t.length>0?t.sort((function(e,t){return a.compare(e.sourceObject.metadata.name.toUpperCase().trim(),t.sourceObject.metadata.name.toUpperCase().trim())})):e.sort((function(e,t){return a.compare(e.metadata.name.toUpperCase().trim(),t.metadata.name.toUpperCase().trim())}))}return[]},workspaceObjects:function(){if(this.currentFolder){var e=this.currentFolder.children.filter((function(e){return e.metadata.type!==r.Folder&&e.metadata.type!==r.SoftLink})),t=this.currentFolder.children.filter((function(e){var t=e.metadata.type===r.SoftLink&&e.sourceObject&&e.sourceObject.metadata.type!==r.Folder;return t})),a=new Intl.Collator("en",{numeric:!0,sensitivity:"base"});return t.length>0?t.sort((function(e,t){return a.compare(e.sourceObject.metadata.name.toUpperCase().trim(),t.sourceObject.metadata.name.toUpperCase().trim())})):e.sort((function(e,t){return a.compare(e.metadata.name.toUpperCase().trim(),t.metadata.name.toUpperCase().trim())}))}return[]},trimSearchString:function(){var e=this.searchString.trim();return e},searchList:function(){var e=this,t=[];return this.workspaceObjects.forEach((function(a){var s="";a.metadata.type!==r.MemberGroup&&(s=a.metadata.name),a.metadata.type===r.MemberGroup&&(s=a.uniqueName);var o=e.trimSearchString,n=s.toUpperCase().indexOf(o.toUpperCase());n>=0&&t.push(a)})),t},filteredMethodList:function(){return""!==this.trimSearchString?this.searchList:this.workspaceObjects}},watch:{"$route.params.folderId":{handler:function(e){e&&(p["a"].loadFolder(e),this.selectModeOpen=!1,this.selection=[])},immediate:!0}},mounted:function(){return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:l["a"].loginCheck();case 1:case"end":return e.stop()}}),e)})))()},methods:{put:function(){console.log(this.workspaceObjects)},reload:function(){this.currentFolder&&p["a"].loadFolder(this.currentFolder.uuid),this.selectInit()},selectInit:function(){this.selectModeOpen=!1,this.selection=[]},toggleSelectMode:function(){this.selectModeOpen=!this.selectModeOpen,this.selectModeOpen||(this.selection=[])},toggleCardDisplayMode:function(){"list-mode"===this.cardDisplayMode?this.$store.commit("changeCardDisplayMode","pic-mode"):this.$store.commit("changeCardDisplayMode","list-mode")},toggleSelection:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=t.selection.findIndex((function(t){return t.uuid===e.uuid})),-1===r?t.selection.push(e):t.selection.splice(r,1);case 2:case"end":return a.stop()}}),a)})))()},moveCards:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$modal.show("move-position-modal",{currentFolder:e.currentFolder});case 1:case"end":return t.stop()}}),t)})))()},moveCardsSubmit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.log(e),t.$store.commit("updateLoading",!0),r=[],s=0;case 4:if(!(s<t.selection.length)){a.next=11;break}return a.next=7,d["a"].move(t.selection[s].uuid,e);case 7:console.log("(".concat(s+1,"/").concat(t.selection.length,")"));case 8:s+=1,a.next=4;break;case 11:return a.next=13,Promise.all(r);case 13:t.visitFolder(e),t.$modal.hide("move-position-modal"),t.selectInit(),t.$store.commit("updateLoading",!1);case 17:case"end":return a.stop()}}),a)})))()},removeCards:function(){var e=this;this.$modal.show("dialog",{title:this.$t("確定刪除嗎?"),text:this.$t("刪掉就不會再回來囉"),buttons:[{title:this.$t("取消"),handler:function(){e.$modal.hide("dialog")}},{title:this.$t("確定"),handler:function(){e.$modal.hide("dialog"),e.removeManyGroups()}}]})},shareCards:function(){this.$modal.show("manage-share-mapping-modal",{sourceObjectId:this.selection[0].uuid}),this.selectInit()},enterGroupPreview:function(){this.$store.commit("updateEditPermission",!0);var e=this.selection[0];"WorkspaceQuizGroup"===e.metadata.type?(this.$store.commit("changeQuizGroup",e),this.$router.push("/manager/quizgroup-preview")):"WorkspaceMemberGroup"===e.metadata.type&&(this.$store.commit("changeMemberGroup",e),this.$router.push("/manager/membergroup-preview"))},enterGroup:function(){this.$store.commit("updateEditPermission",!0);var e=this.selection[0];"WorkspaceQuizGroup"===e.metadata.type?(this.$store.commit("changeQuizGroup",e),this.$router.push("/manager/quizgroup-maker")):"WorkspaceMemberGroup"===e.metadata.type&&(this.$store.commit("changeMemberGroup",e),this.$router.push("/manager/membergroup-maker"))},removeManyGroups:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.commit("updateLoading",!0),a=[],r=0;case 3:if(!(r<e.selection.length)){t.next=10;break}return t.next=6,d["a"].remove(e.selection[r].uuid);case 6:console.log("(".concat(r+1,"/").concat(e.selection.length,")"));case 7:r+=1,t.next=3;break;case 10:return t.next=12,Promise.all(a);case 12:e.selectInit(),e.currentFolder&&p["a"].loadFolder(e.currentFolder.uuid),e.$store.commit("updateLoading",!1);case 15:case"end":return t.stop()}}),t)})))()},removeGroupCard:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,d["a"].remove(e.uuid);case 2:t.currentFolder&&p["a"].loadFolder(t.currentFolder.uuid);case 3:case"end":return a.stop()}}),a)})))()},copyGroupCard:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,d["a"].copyQuizGroup(e.uuid);case 2:r=a.sent,t.currentFolder&&t.currentFolder.children.push(r);case 4:case"end":return a.stop()}}),a)})))()},copyMemberGroupCard:function(e){this.$modal.show("copy-memberGroup-modal",{workspaceObject:e})},visitFolder:function(e){var t=this.$store.state.currentFolder.uuid;e!==t&&this.$router.push({params:{folderId:e}})}}}),g=b,C=(a("b032"),a("8959"),a("2877")),k=Object(C["a"])(g,s,o,!1,null,"60d41a6e",null);t["default"]=k.exports},8959:function(e,t,a){"use strict";var r=a("226e"),s=a.n(r);s.a},9636:function(e,t,a){},b032:function(e,t,a){"use strict";var r=a("9636"),s=a.n(r);s.a}}]);
//# sourceMappingURL=chunk-6b27b25e.53cc112e.js.map